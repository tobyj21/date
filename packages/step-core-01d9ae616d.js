!function i(o,r,s){function a(t,e){if(!r[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=r[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,i,o,r,s)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(o,e,t){!function(i){!function(){"use strict";var e=o("@floating-ui/dom"),t=o("../public/js/components/uiComponent.js"),n=o("../public/js/components/wordingModule.js");i.module={},i.stepCore={server:o("../public/js/server.js"),floatingUI:{computePosition:e.computePosition,flip:e.flip,offset:e.offset,size:e.size,arrow:e.arrow,shift:e.shift,autoUpdate:e.autoUpdate},engagementComponent:o("../public/js/engagement/display.js"),floatingMenu:o("../public/js/components/floatingMenu.js"),languagePicker:o("../public/js/components/language-picker.js"),formCsrf:o("../public/js/formCsrf.js"),translate:o("../public/js/glossary.js"),toast:o("../public/js/components/toast.js"),uiComponent:t.uiComponent,components:{dialogComponent:t.dialogComponent},wording:n,languageFont:o("../public/js/pathways/components/translation-font.js"),findInTree:o("../models/definitions/findInTree")}}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../models/definitions/findInTree":2,"../public/js/components/floatingMenu.js":12,"../public/js/components/language-picker.js":13,"../public/js/components/toast.js":14,"../public/js/components/uiComponent.js":15,"../public/js/components/wordingModule.js":16,"../public/js/engagement/display.js":17,"../public/js/formCsrf.js":18,"../public/js/glossary.js":19,"../public/js/pathways/components/translation-font.js":20,"../public/js/server.js":21,"@floating-ui/dom":6}],2:[function(e,t,n){"use strict";t.exports=function t({tree:n,id:i,ids:o,foundDefinitions:r=[],traversed:s=[]}){for(let e=0;e<n.length;e++){var a=n[e];if(i&&a.id==i)return a;if(o&&o.includes(a.id)&&(r.map(e=>e.id).includes(a.id)||r.push(a)),a.children&&!s.includes(a.id)&&(a=t({tree:a.children,id:i,ids:o,foundDefinitions:r,traversed:[...s,a.id]}),i)&&a)return a}if(o)return r}},{}],3:[function(e,t,n){"use strict";const u=e("../triggerTests/testConditions");t.exports=function({steps:t,currentPriority:n=0,data:i,userId:o,locationId:r,orgId:s,networkId:a}){var l={};for(let e=0;e<t.length;e++){var c,d=t[e];d.queuePriority&&!l.hasOwnProperty(d.queuePriority)&&(c=u({conditions:d.conditions,data:i,userId:o,locationId:r,orgId:s,networkId:a}),l[d.queuePriority]=c?d.id:null)}for(let e=n+1;e<100;e++)if(l[e])return l[e]}},{"../triggerTests/testConditions":4}],4:[function(e,t,n){"use strict";const c=e("dayjs");t.exports=function({conditions:t,data:n,anyTrue:e,userId:i,templateId:o}){if(e){for(let e=0;e<t.length;e++)if(r({condition:t[e],data:n,templateId:o}))return!0;return!1}if(!t.length)return!0;for(let e=0;e<t.length;e++)if(function({set:t,data:n,templateId:i}){for(let e=0;e<t.length;e++)if(!r({condition:t[e],data:n,templateId:i}))return;return 1}({set:t[e].condition,data:n,templateId:o}))return!0;function r({condition:e,data:t,templateId:n}){t=function({condition:t,data:e,userId:n,templateId:i}){if("user"==t.source){var o=e.user.filter(e=>e.id==n)[0];if(!o)return null;if("role"==t.property)return o.role;if("last_login"==t.property)return o.last_login?c(o.last_login):null;if("engagement_status"==t.property)return o.engagement_status;if("networkId"==t.property)return o.network_id;if("orgId"==t.property)return o.org_id}if("engagementItems"==t.source&&"created_count"==t.property)return e.engagementItems.filter(e=>e.template_id==i).length;if("engagementLogs"==t.source)return function({property:e,logs:t}){for(var n=t.length-1;0<=n;n--){var i=t[n];if(i.property==e)return i.value}return null}({property:t.property,logs:e.engagementLogs});if("orgUnit"==t.source)return e.orgUnit.filter(e=>e.property==t.property)[0].value;if("config"==t.source){o=e.config.filter(e=>e.property==t.property&&e.user_id==n)[0];if(o)return o.value_1}if(t.pageSelector&&"object"==typeof window)return $(t.pageSelector+":visible").length||null}({condition:e,data:t,userId:i,templateId:n});return"exists"==e.operator?![void 0,null].includes(t):"notExists"==e.operator?[void 0,null].includes(t):"olderThan"==e.operator?t&&(e.date?t.diff(c(e.date))<0:(n=c().subtract(e.value,"day"),t.diff(n)<0)):"olderThanOrNotExists"==e.operator?!t||(e.date?t.diff(c(e.date))<0:(n=c().subtract(e.value,"day"),t.diff(n)<0)):"newerThan"==e.operator?t&&(e.date?0<t.diff(c(e.date)):(n=c().subtract(e.value,"day"),0<t.diff(n))):"<"==e.operator?parseInt(t)<parseInt(e.value):">"==e.operator?parseInt(t)>parseInt(e.value):"="==e.operator?e.value&&e.value.match(/\{.*\}/)?l({value:t,setString:e.value}):s({value1:t,value2:e.value}):"!="==e.operator&&(e.value&&e.value.match(/\{.*\}/)?!l({value:t,setString:e.value}):!s({value1:t,value2:e.value}))}function s({value1:e,value2:t}){return(e=a({value:e}))==(t=a({value:t}))}function a({value:e}){return[null,void 0,0,!1,"0","false"].includes(e)?0:[1,!0,"1","true"].includes(e)?1:e}function l({value:e,setString:t}){t=t.replace("{","").replace("}","").split(",");return e=e?e.toString():"",t.includes(e)}}},{dayjs:9}],5:[function(e,t,n){var i,o;i=this,o=function(e){"use strict";function w(e){return e.split("-")[1]}function y(e){return"y"===e?"height":"width"}function x(e){return e.split("-")[0]}function b(e){return["top","bottom"].includes(x(e))?"x":"y"}function k(e,t,n){var{reference:i,floating:o}=e,r=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,a=b(t),e=y(a),l=i[e]/2-o[e]/2,c="x"===a;let d;switch(x(t)){case"top":d={x:r,y:i.y-o.height};break;case"bottom":d={x:r,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:s};break;case"left":d={x:i.x-o.width,y:s};break;default:d={x:i.x,y:i.y}}switch(w(t)){case"start":d[a]-=l*(n&&c?-1:1);break;case"end":d[a]+=l*(n&&c?-1:1)}return d}function v(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function g(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function C(e,t){var{x:e,y:n,platform:i,rects:o,elements:r,strategy:s}=e,{boundary:t="clippingAncestors",rootBoundary:a="viewport",elementContext:l="floating",altBoundary:c=!1,padding:d=0}=t=void 0===t?{}:t,d=v(d),c=r[c?"floating"===l?"reference":"floating":l],u=g(await i.getClippingRect({element:null==(u=await(null==i.isElement?void 0:i.isElement(c)))||u?c:c.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(r.floating)),boundary:t,rootBoundary:a,strategy:s})),c="floating"===l?{...o.floating,x:e,y:n}:o.reference,t=await(null==i.getOffsetParent?void 0:i.getOffsetParent(r.floating)),a=await(null==i.isElement?void 0:i.isElement(t))&&await(null==i.getScale?void 0:i.getScale(t))||{x:1,y:1},l=g(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:c,offsetParent:t,strategy:s}):c);return{top:(u.top-l.top+d.top)/a.y,bottom:(l.bottom-u.bottom+d.bottom)/a.y,left:(u.left-l.left+d.left)/a.x,right:(l.right-u.right+d.right)/a.x}}const I=Math.min,E=Math.max;function T(e,t,n){return E(e,I(t,n))}const n=["top","right","bottom","left"],L=n.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),t={left:"right",right:"left",bottom:"top",top:"bottom"};function $(e){return e.replace(/left|right|bottom|top/g,e=>t[e])}function A(e,t,n){void 0===n&&(n=!1);var i=w(e),e=b(e),o=y(e);let r="x"===e?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return{main:r=t.reference[o]>t.floating[o]?$(r):r,cross:$(r)}}const i={start:"end",end:"start"};function S(e){return e.replace(/start|end/g,e=>i[e])}function O(e,t,n,i){const o=w(e);let r=function(e,t,n){var i=["left","right"],o=["right","left"];switch(e){case"top":case"bottom":return n?t?o:i:t?i:o;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(x(e),"start"===n,i);return r=o&&(r=r.map(e=>e+"-"+o),t)?r.concat(r.map(S)):r}function s(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function a(t){return n.some(e=>0<=t[e])}function l(e){var t=I(...e.map(e=>e.left)),n=I(...e.map(e=>e.top));return{x:t,y:n,width:E(...e.map(e=>e.right))-t,height:E(...e.map(e=>e.bottom))-n}}function m(e){return"x"===e?"y":"x"}e.arrow=m=>({name:"arrow",options:m,async fn(e){var{element:t,padding:n=0}=m||{},{x:e,y:i,placement:o,rects:r,platform:s,elements:a}=e;if(null==t)return{};var n=v(n),e={x:e,y:i},i=b(o),l=y(i),c=await s.getDimensions(t),d="y"===i,u=d?"top":"left",h=d?"bottom":"right",d=d?"clientHeight":"clientWidth",f=r.reference[l]+r.reference[i]-e[i]-r.floating[l],p=e[i]-r.reference[i],t=await(null==s.getOffsetParent?void 0:s.getOffsetParent(t));let g=t?t[d]:0;g&&await(null==s.isElement?void 0:s.isElement(t))||(g=a.floating[d]||r.floating[l]);s=n[u],t=g-c[l]-n[h],a=g/2-c[l]/2+(f/2-p/2),d=T(s,a,t),f=null!=w(o)&&a!=d&&r.reference[l]/2-(a<s?n[u]:n[h])-c[l]/2<0;return{[i]:e[i]-(f?a<s?s-a:t-a:0),data:{[i]:d,centerOffset:a-d}}}}),e.autoPlacement=function(m){return{name:"autoPlacement",options:m=void 0===m?{}:m,async fn(e){var{rects:t,middlewareData:n,placement:i,platform:o,elements:r}=e;const{crossAxis:s=!1,alignment:a,allowedPlacements:l=L,autoAlignment:c=!0,...d}=m;var u,h,f=void 0!==a||l===L?(h=c,f=l,((u=a||null)?[...f.filter(e=>w(e)===u),...f.filter(e=>w(e)!==u)]:f.filter(e=>x(e)===e)).filter(e=>!u||w(e)===u||!!h&&S(e)!==e)):l,e=await C(e,d),p=(null==(p=n.autoPlacement)?void 0:p.index)||0,g=f[p];return null==g?{}:({main:t,cross:o}=A(g,t,await(null==o.isRTL?void 0:o.isRTL(r.floating))),i!==g?{reset:{placement:f[0]}}:(r=[e[x(g)],e[t],e[o]],e=[...(null==(t=n.autoPlacement)?void 0:t.overflows)||[],{placement:g,overflows:r}],(o=f[p+1])?{data:{index:p+1,overflows:e},reset:{placement:o}}:(g=(null==(t=(n=e.map(e=>{var t=w(e.placement);return[e.placement,t&&s?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1])).filter(e=>e[2].slice(0,w(e[0])?2:3).every(e=>e<=0))[0])?void 0:t[0])||n[0][0])!==i?{data:{index:p+1,overflows:e},reset:{placement:g}}:{}))}}},e.computePosition=async(t,n,e)=>{var{placement:i="bottom",strategy:o="absolute",middleware:e=[],platform:r}=e,s=e.filter(Boolean),a=await(null==r.isRTL?void 0:r.isRTL(n));let l=await r.getElementRects({reference:t,floating:n,strategy:o}),{x:c,y:d}=k(l,i,a),u=i,h={},f=0;for(let e=0;e<s.length;e++){var{name:p,fn:g}=s[e],{x:g,y:m,data:y,reset:v}=await g({x:c,y:d,initialPlacement:i,placement:u,strategy:o,middlewareData:h,rects:l,platform:r,elements:{reference:t,floating:n}});c=null!=g?g:c,d=null!=m?m:d,h={...h,[p]:{...h[p],...y}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(u=v.placement),v.rects&&(l=!0===v.rects?await r.getElementRects({reference:t,floating:n,strategy:o}):v.rects),{x:c,y:d}=k(l,u,a)),e=-1)}return{x:c,y:d,placement:u,strategy:o,middlewareData:h}},e.detectOverflow=C,e.flip=function(k){return{name:"flip",options:k=void 0===k?{}:k,async fn(e){const{placement:t,middlewareData:n,rects:i,initialPlacement:o,platform:r,elements:s}=e,{mainAxis:a=!0,crossAxis:l=!0,fallbackPlacements:c,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:u="none",flipAlignment:h=!0,...f}=k;var p=x(t),g=x(o)===o,m=await(null==r.isRTL?void 0:r.isRTL(s.floating)),g=c||(g||!h?[$(o)]:(y=$(g=o),[S(g),y,S(y)])),y=(c||"none"===u||g.push(...O(o,h,u,m)),[o,...g]),g=await C(e,f),e=[],v=(null==(b=n.flip)?void 0:b.overflows)||[];if(a&&e.push(g[p]),l&&({main:b,cross:p}=A(t,i,m),e.push(g[b],g[p])),v=[...v,{placement:t,overflows:e}],!e.every(e=>e<=0)){var w,b=((null==(m=n.flip)?void 0:m.index)||0)+1,g=y[b];if(g)return{data:{index:b,overflows:v},reset:{placement:g}};let e=null==(p=v.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:p.placement;if(!e)switch(d){case"bestFit":{const t=null==(w=v.map(e=>[e.placement,e.overflows.filter(e=>0<e).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:w[0];t&&(e=t);break}case"initialPlacement":e=o}if(t!==e)return{reset:{placement:e}}}return{}}}},e.hide=function(r){return{name:"hide",options:r=void 0===r?{}:r,async fn(e){const{strategy:t="referenceHidden",...n}=r;var i=e["rects"];switch(t){case"referenceHidden":var o=s(await C(e,{...n,elementContext:"reference"}),i.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:a(o)}};case"escaped":o=s(await C(e,{...n,altBoundary:!0}),i.floating);return{data:{escapedOffsets:o,escaped:a(o)}};default:return{}}}}},e.inline=function(s){return{name:"inline",options:s=void 0===s?{}:s,async fn(e){const{placement:c,elements:t,rects:n,platform:i,strategy:o}=e,{padding:r=2,x:d,y:u}=s;e=Array.from(await(null==i.getClientRects?void 0:i.getClientRects(t.reference))||[]);const h=function(e){var t=e.slice().sort((e,t)=>e.y-t.y),n=[];let i=null;for(let e=0;e<t.length;e++){var o=t[e];!i||o.y-i.y>i.height/2?n.push([o]):n[n.length-1].push(o),i=o}return n.map(e=>g(l(e)))}(e),f=g(l(e)),p=v(r);e=await i.getElementRects({reference:{getBoundingClientRect:function(){if(2===h.length&&h[0].left>h[1].right&&null!=d&&null!=u)return h.find(e=>d>e.left-p.left&&d<e.right+p.right&&u>e.top-p.top&&u<e.bottom+p.bottom)||f;if(2<=h.length){var e,t;if("x"===b(c))return n=h[0],i=h[h.length-1],o="top"===x(c),{top:e=n.top,bottom:r=i.bottom,left:t=(o?n:i).left,right:o=(o?n:i).right,width:o-t,height:r-e,x:t,y:e};const s="left"===x(c),a=E(...h.map(e=>e.right)),l=I(...h.map(e=>e.left));var n=h.filter(e=>s?e.left===l:e.right===a),i=n[0].top,o=n[n.length-1].bottom,r=l;return{top:i,bottom:o,left:r,right:a,width:a-r,height:o-i,x:r,y:i}}return f}},floating:t.floating,strategy:o});return n.reference.x!==e.reference.x||n.reference.y!==e.reference.y||n.reference.width!==e.reference.width||n.reference.height!==e.reference.height?{reset:{rects:e}}:{}}}},e.limitShift=function(h){return{options:h=void 0===h?{}:h,fn(e){var{x:t,y:n,placement:i,rects:o,middlewareData:r}=e,{offset:s=0,mainAxis:a=!0,crossAxis:l=!0}=h,t={x:t,y:n},n=b(i),c=m(n);let d=t[n],u=t[c];var t="function"==typeof s?s(e):s,e="number"==typeof t?{mainAxis:t,crossAxis:0}:{mainAxis:0,crossAxis:0,...t};return a&&(t=o.reference[n]-o.floating[s="y"===n?"height":"width"]+e.mainAxis,a=o.reference[n]+o.reference[s]-e.mainAxis,d<t?d=t:d>a&&(d=a)),l&&(s="y"===n?"width":"height",t=["top","left"].includes(x(i)),l=o.reference[c]-o.floating[s]+(t&&(null==(a=r.offset)?void 0:a[c])||0)+(t?0:e.crossAxis),a=o.reference[c]+o.reference[s]+(!t&&(null==(i=r.offset)?void 0:i[c])||0)-(t?e.crossAxis:0),u<l?u=l:u>a&&(u=a)),{[n]:d,[c]:u}}}},e.offset=function(i){return{name:"offset",options:i=void 0===i?0:i,async fn(e){var{x:t,y:n}=e,e=await async function(e,t){var{placement:n,platform:i,elements:o}=e,i=await(null==i.isRTL?void 0:i.isRTL(o.floating)),o=x(n),r=w(n),n="x"===b(n),o=["left","top"].includes(o)?-1:1,i=i&&n?-1:1;let{mainAxis:s,crossAxis:a,alignmentAxis:l}="number"==typeof(e="function"==typeof t?t(e):t)?{mainAxis:e,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...e};return r&&"number"==typeof l&&(a="end"===r?-1*l:l),n?{x:a*i,y:s*o}:{x:s*o,y:a*i}}(e,i);return{x:t+e.x,y:n+e.y,data:e}}}},e.rectToClientRect=g,e.shift=function(p){return{name:"shift",options:p=void 0===p?{}:p,async fn(e){var{x:t,y:n,placement:i}=e;const{mainAxis:o=!0,crossAxis:r=!1,limiter:s={fn:e=>{var{x:e,y:t}=e;return{x:e,y:t}}},...a}=p;var l,c={x:t,y:n},d=await C(e,a),i=b(x(i)),u=m(i);let h=c[i],f=c[u];o&&(c=h+d["y"===i?"top":"left"],l=h-d["y"===i?"bottom":"right"],h=T(c,h,l)),r&&(c=f+d["y"===u?"top":"left"],l=f-d["y"===u?"bottom":"right"],f=T(c,f,l));d=s.fn({...e,[i]:h,[u]:f});return{...d,data:{x:d.x-t,y:d.y-n}}}}},e.size=function(v){return{name:"size",options:v=void 0===v?{}:v,async fn(e){var{placement:t,rects:n,platform:i,elements:o}=e;const{apply:r=()=>{},...s}=v;var a=await C(e,s),l=x(t),c=w(t),t="x"===b(t),{width:n,height:d}=n.floating;let u,h;"top"===l||"bottom"===l?(u=l,h=c===(await(null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(h=l,u="end"===c?"top":"bottom");var f,l=d-a[u],p=n-a[h],g=!e.middlewareData.shift;let m=l,y=p;t?(f=n-a.left-a.right,y=c||g?I(p,f):f):(p=d-a.top-a.bottom,m=c||g?I(l,p):p),g&&!c&&(f=E(a.left,0),l=E(a.right,0),p=E(a.top,0),g=E(a.bottom,0),t?y=n-2*(0!==f||0!==l?f+l:E(a.left,a.right)):m=d-2*(0!==p||0!==g?p+g:E(a.top,a.bottom))),await r({...e,availableWidth:y,availableHeight:m});c=await i.getDimensions(o.floating);return n!==c.width||d!==c.height?{reset:{rects:!0}}:{}}}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?o(n):"function"==typeof define&&define.amd?define(["exports"],o):o((i="undefined"!=typeof globalThis?globalThis:i||self).FloatingUICore={})},{}],6:[function(e,t,n){var i,o;i=this,o=function(e,m){"use strict";function y(e){return(null==(e=e.ownerDocument)?void 0:e.defaultView)||window}function c(e){return y(e).getComputedStyle(e)}function t(e){return e instanceof y(e).Node}function d(e){return t(e)?(e.nodeName||"").toLowerCase():""}let n;function i(){var e;return n||((e=navigator.userAgentData)&&Array.isArray(e.brands)?n=e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent)}function l(e){return e instanceof y(e).HTMLElement}function v(e){return e instanceof y(e).Element}function o(e){return"undefined"!=typeof ShadowRoot&&(e instanceof y(e).ShadowRoot||e instanceof ShadowRoot)}function u(e){var{overflow:e,overflowX:t,overflowY:n,display:i}=c(e);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function h(e){var t=/firefox/i.test(i());const n=c(e);e=n.backdropFilter||n.WebkitBackdropFilter;return"none"!==n.transform||"none"!==n.perspective||!!e&&"none"!==e||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some(e=>n.willChange.includes(e))||["paint","layout","strict","content"].some(e=>{var t=n.contain;return null!=t&&t.includes(e)})}function w(){return/^((?!chrome|android).)*safari/i.test(i())}function f(e){return["html","body","#document"].includes(d(e))}const s=Math.min,a=Math.max,p=Math.round;function g(e){var t=c(e);let n=parseFloat(t.width),i=parseFloat(t.height);var t=l(e),o=t?e.offsetWidth:n,t=t?e.offsetHeight:i,e=p(n)!==o||p(i)!==t;return e&&(n=o,i=t),{width:n,height:i,fallback:e}}function b(e){return v(e)?e:e.contextElement}const k={x:1,y:1};function x(e){e=b(e);if(!l(e))return k;var t=e.getBoundingClientRect(),{width:e,height:n,fallback:i}=g(e);let o=(i?p(t.width):t.width)/e,r=(i?p(t.height):t.height)/n;return o&&Number.isFinite(o)||(o=1),r&&Number.isFinite(r)||(r=1),{x:o,y:r}}function C(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=e.getBoundingClientRect(),r=b(e);let s=k;t&&(i?v(i)&&(s=x(i)):s=x(e));const a=r?y(r):window;t=w()&&n;let l=(o.left+(t&&(null==(e=a.visualViewport)?void 0:e.offsetLeft)||0))/s.x,c=(o.top+(t&&(null==(n=a.visualViewport)?void 0:n.offsetTop)||0))/s.y,d=o.width/s.x,u=o.height/s.y;if(r){const a=y(r);var h=i&&v(i)?y(i):i;let e=a.frameElement;for(;e&&i&&h!==a;){var f=x(e),p=e.getBoundingClientRect(),g=getComputedStyle(e);p.x+=(e.clientLeft+parseFloat(g.paddingLeft))*f.x,p.y+=(e.clientTop+parseFloat(g.paddingTop))*f.y,l*=f.x,c*=f.y,d*=f.x,u*=f.y,l+=p.x,c+=p.y,e=y(e).frameElement}}return m.rectToClientRect({width:d,height:u,x:l,y:c})}function I(e){return((t(e)?e.ownerDocument:e.document)||window.document).documentElement}function E(e){return v(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function T(e){return C(I(e)).left+E(e).scrollLeft}function L(e){return"html"!==d(e)&&(e=e.assignedSlot||e.parentNode||o(e)&&e.host||I(e),o(e))?e.host:e}function $(e,t){void 0===t&&(t=[]);var n=function e(t){t=L(t);return f(t)?t.ownerDocument.body:l(t)&&u(t)?t:e(t)}(e),e=n===(null==(e=e.ownerDocument)?void 0:e.body),i=y(n);return e?t.concat(i,i.visualViewport||[],u(n)?n:[]):t.concat(n,$(n))}function A(e,t,n){let i;var o,r,s;return i="viewport"===t?function(e,t){var n=y(e),e=I(e),n=n.visualViewport;let i=e.clientWidth,o=e.clientHeight,r=0,s=0;return n&&(i=n.width,o=n.height,w()&&"fixed"!==t||(r=n.offsetLeft,s=n.offsetTop)),{width:i,height:o,x:r,y:s}}(e,n):"document"===t?function(e){var t=I(e),n=E(e),i=e.ownerDocument.body,o=a(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=a(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+T(e);return e=-n.scrollTop,"rtl"===c(i).direction&&(s+=a(t.clientWidth,i.clientWidth)-o),{width:o,height:r,x:s,y:e}}(I(e)):v(t)?(r=(n=C(o=t,!0,"fixed"===(n=n))).top+o.clientTop,n=n.left+o.clientLeft,s=l(o)?x(o):{x:1,y:1},{width:o.clientWidth*s.x,height:o.clientHeight*s.y,x:n*s.x,y:r*s.y}):(o={...t},w()&&(n=y(e),o.x-=(null==(r=n.visualViewport)?void 0:r.offsetLeft)||0,o.y-=(null==(s=n.visualViewport)?void 0:s.offsetTop)||0),o),m.rectToClientRect(i)}function S(e,t){var n=t.get(e);if(n)return n;let i=$(e).filter(e=>v(e)&&"body"!==d(e)),o=null;var r="fixed"===c(e).position;let s=r?L(e):e;for(;v(s)&&!f(s);){var a=c(s),l=h(s),l=(l||"fixed"!==a.position||(o=null),r?!l&&!o:!l&&"static"===a.position&&!!o&&["absolute","fixed"].includes(o.position)||u(s)&&!l&&function e(t,n){t=L(t);return!(t===n||!v(t)||f(t))&&("fixed"===c(t).position||e(t,n))}(e,s));l?i=i.filter(e=>e!==s):o=a,s=L(s)}return t.set(e,i),i}function r(e,t){return l(e)&&"fixed"!==c(e).position?t?t(e):e.offsetParent:null}function O(e,t){var n,i=y(e);if(!l(e))return i;let o=r(e,t);for(;o&&(n=o,["table","td","th"].includes(d(n)))&&"static"===c(o).position;)o=r(o,t);return(!o||"html"!==d(o)&&("body"!==d(o)||"static"!==c(o).position||h(o)))&&(o||function(e){let t=L(e);for(;l(t)&&!f(t);){if(h(t))return t;t=L(t)}return null}(e))||i}const M={getClippingRect:function(e){let{element:n,boundary:t,rootBoundary:i,strategy:o}=e;var r=(e=[..."clippingAncestors"===t?S(n,this._c):[].concat(t),i])[0];return{width:(e=e.reduce((e,t)=>{t=A(n,t,o);return e.top=a(t.top,e.top),e.right=s(t.right,e.right),e.bottom=s(t.bottom,e.bottom),e.left=a(t.left,e.left),e},A(n,r,o))).right-e.left,height:e.bottom-e.top,x:e.left,y:e.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var{rect:e,offsetParent:t,strategy:n}=e,i=l(t),o=I(t);if(t===o)return e;let r={scrollLeft:0,scrollTop:0},s={x:1,y:1};var a={x:0,y:0};return(i||!i&&"fixed"!==n)&&("body"===d(t)&&!u(o)||(r=E(t)),l(t))&&(i=C(t),s=x(t),a.x=i.x+t.clientLeft,a.y=i.y+t.clientTop),{width:e.width*s.x,height:e.height*s.y,x:e.x*s.x-r.scrollLeft*s.x+a.x,y:e.y*s.y-r.scrollTop*s.y+a.y}},isElement:v,getDimensions:g,getOffsetParent:O,getDocumentElement:I,getScale:x,async getElementRects(e){var{reference:e,floating:t,strategy:n}=e,i=this.getOffsetParent||O,o=this.getDimensions;return{reference:function(e,t,n){var i=l(t),o=I(t),e=C(e,!0,"fixed"===n,t);let r={scrollLeft:0,scrollTop:0};var s={x:0,y:0};return(i||!i&&"fixed"!==n)&&("body"===d(t)&&!u(o)||(r=E(t)),l(t)?(i=C(t,!0),s.x=i.x+t.clientLeft,s.y=i.y+t.clientTop):o&&(s.x=T(o))),{x:e.left+r.scrollLeft-s.x,y:e.top+r.scrollTop-s.y,width:e.width,height:e.height}}(e,await i(t),n),floating:{x:0,y:0,...await o(t)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===c(e).direction};Object.defineProperty(e,"arrow",{enumerable:!0,get:function(){return m.arrow}}),Object.defineProperty(e,"autoPlacement",{enumerable:!0,get:function(){return m.autoPlacement}}),Object.defineProperty(e,"detectOverflow",{enumerable:!0,get:function(){return m.detectOverflow}}),Object.defineProperty(e,"flip",{enumerable:!0,get:function(){return m.flip}}),Object.defineProperty(e,"hide",{enumerable:!0,get:function(){return m.hide}}),Object.defineProperty(e,"inline",{enumerable:!0,get:function(){return m.inline}}),Object.defineProperty(e,"limitShift",{enumerable:!0,get:function(){return m.limitShift}}),Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return m.offset}}),Object.defineProperty(e,"shift",{enumerable:!0,get:function(){return m.shift}}),Object.defineProperty(e,"size",{enumerable:!0,get:function(){return m.size}}),e.autoUpdate=function(n,e,i,t){const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:s=!0,animationFrame:a=!1}=t=void 0===t?{}:t,l=o||r?[...v(n)?$(n):n.contextElement?$(n.contextElement):[],...$(e)]:[];l.forEach(e=>{var t=!v(e)&&e.toString().includes("V");!o||a&&!t||e.addEventListener("scroll",i,{passive:!0}),r&&e.addEventListener("resize",i)});let c=null;s&&(c=new ResizeObserver(()=>{i()}),v(n)&&!a&&c.observe(n),v(n)||!n.contextElement||a||c.observe(n.contextElement),c.observe(e));let d,u=a?C(n):null;return a&&function e(){const t=C(n);!u||t.x===u.x&&t.y===u.y&&t.width===u.width&&t.height===u.height||i();u=t;d=requestAnimationFrame(e)}(),i(),()=>{var e;l.forEach(e=>{o&&e.removeEventListener("scroll",i),r&&e.removeEventListener("resize",i)}),null!=(e=c)&&e.disconnect(),c=null,a&&cancelAnimationFrame(d)}},e.computePosition=(e,t,n)=>{var i=new Map,n={platform:M,...n},i={...n.platform,_c:i};return m.computePosition(e,t,{...n,platform:i})},e.getOverflowAncestors=$,e.platform=M,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?o(n,e("@floating-ui/core")):"function"==typeof define&&define.amd?define(["exports","@floating-ui/core"],o):o((i="undefined"!=typeof globalThis?globalThis:i||self).FloatingUIDOM={},i.FloatingUICore)},{"@floating-ui/core":5}],7:[function(e,t,n){"use strict";n.byteLength=function(e){var e=d(e),t=e[0],e=e[1];return 3*(t+e)/4-e},n.toByteArray=function(e){var t,n,i=d(e),o=i[0],i=i[1],r=new c(function(e,t){return 3*(e+t)/4-t}(o,i)),s=0,a=0<i?o-4:o;for(n=0;n<a;n+=4)t=l[e.charCodeAt(n)]<<18|l[e.charCodeAt(n+1)]<<12|l[e.charCodeAt(n+2)]<<6|l[e.charCodeAt(n+3)],r[s++]=t>>16&255,r[s++]=t>>8&255,r[s++]=255&t;2===i&&(t=l[e.charCodeAt(n)]<<2|l[e.charCodeAt(n+1)]>>4,r[s++]=255&t);1===i&&(t=l[e.charCodeAt(n)]<<10|l[e.charCodeAt(n+1)]<<4|l[e.charCodeAt(n+2)]>>2,r[s++]=t>>8&255,r[s++]=255&t);return r},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],r=0,s=n-i;r<s;r+=16383)o.push(function(e,t,n){for(var i,o=[],r=t;r<n;r+=3)i=(e[r]<<16&16711680)+(e[r+1]<<8&65280)+(255&e[r+2]),o.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(i));return o.join("")}(e,r,s<r+16383?s:r+16383));1==i?(t=e[n-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],l=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,r=i.length;o<r;++o)a[o]=i[o],l[i.charCodeAt(o)]=o;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],8:[function(O,e,M){!function(e){!function(){"use strict";var I=O("base64-js"),r=O("ieee754"),t=(M.Buffer=u,M.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},M.INSPECT_MAX_BYTES=50,2147483647);function l(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=u.prototype,e}function u(e,t,n){if("number"!=typeof e)return i(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function i(e,t,n){if("string"==typeof e){var i=e,o=t;if(u.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))return r=0|h(i,o),s=l(r),s=(i=s.write(i,o))!==r?s.slice(0,i):s;throw new TypeError("Unknown encoding: "+o)}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)){var r=e,i=t,s=n;if(i<0||r.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<i+(s||0))throw new RangeError('"length" is outside of buffer bounds');return(r=void 0===i&&void 0===s?new Uint8Array(r):void 0===s?new Uint8Array(r,i):new Uint8Array(r,i,s)).__proto__=u.prototype,r}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return u.from(o,t,n);var a=function(e){{var t,n;if(u.isBuffer(e))return t=0|d(e.length),0!==(n=l(t)).length&&e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||S(e.length)?l(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return o(e),l(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),n=l(t),i=0;i<t;i+=1)n[i]=255&e[i];return n}function d(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,i=2<arguments.length&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(e).length;default:if(o)return i?-1:T(e).length;t=(""+t).toLowerCase(),o=!0}}function n(e,t,n){var i,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var r=this,s=t,a=n,l=r.length;(!a||a<0||l<a)&&(a=l);for(var c="",d=s=!s||s<0?0:s;d<a;++d)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(r[d]);return c;case"utf8":case"utf-8":return E(this,t,n);case"ascii":var u=this,l=t,h=n,f="";h=Math.min(u.length,h);for(var p=l;p<h;++p)f+=String.fromCharCode(127&u[p]);return f;case"latin1":case"binary":var g=this,s=t,m=n,y="";m=Math.min(g.length,m);for(var v=s;v<m;++v)y+=String.fromCharCode(g[v]);return y;case"base64":return w=this,i=n,0===(b=t)&&i===w.length?I.fromByteArray(w):I.fromByteArray(w.slice(b,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var w=t,b=n,k=this.slice(w,b),x="",C=0;C<k.length;C+=2)x+=String.fromCharCode(k[C]+256*k[C+1]);return x;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function a(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function f(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),(n=(n=S(n=+n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,i)),u.isBuffer(t))return 0===t.length?-1:p(e,t,n,i,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):p(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function p(e,t,n,i,o){var r=1,s=e.length,a=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s/=r=2,a/=2,n/=2}function l(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(o)for(var c=-1,d=n;d<s;d++)if(l(e,d)===l(t,-1===c?0:d-c)){if(d-(c=-1===c?d:c)+1===a)return c*r}else-1!==c&&(d-=d-c),c=-1;else for(d=n=s<n+a?s-a:n;0<=d;d--){for(var u=!0,h=0;h<a;h++)if(l(e,d+h)!==l(t,h)){u=!1;break}if(u)return d}return-1}function m(e,t,n,i){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function y(e,t,n,i){return $(function(e,t){for(var n,i,o=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),i=n>>8,o.push(n%256),o.push(i);return o}(t,e.length-n),e,n,i)}function E(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var r,s,a,l,c=e[o],d=null,u=239<c?4:223<c?3:191<c?2:1;if(o+u<=n)switch(u){case 1:c<128&&(d=c);break;case 2:128==(192&(r=e[o+1]))&&127<(l=(31&c)<<6|63&r)&&(d=l);break;case 3:r=e[o+1],s=e[o+2],128==(192&r)&&128==(192&s)&&2047<(l=(15&c)<<12|(63&r)<<6|63&s)&&(l<55296||57343<l)&&(d=l);break;case 4:r=e[o+1],s=e[o+2],a=e[o+3],128==(192&r)&&128==(192&s)&&128==(192&a)&&65535<(l=(15&c)<<18|(63&r)<<12|(63&s)<<6|63&a)&&l<1114112&&(d=l)}null===d?(d=65533,u=1):65535<d&&(i.push((d-=65536)>>>10&1023|55296),d=56320|1023&d),i.push(d),o+=u}var h=i,f=h.length;if(f<=v)return String.fromCharCode.apply(String,h);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,h.slice(g,g+=v));return p}M.kMaxLength=t,(u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=i,u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(e,t,n){return t=t,n=n,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?l(e).fill(t,n):l(e).fill(t):l(e)},u.allocUnsafe=s,u.allocUnsafeSlow=s,u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(A(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,i=t.length,o=0,r=Math.min(n,i);o<r;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=u.allocUnsafe(t),i=0,o=0;o<e.length;++o){var r=e[o];if(A(r,Uint8Array)&&(r=u.from(r)),!u.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,i),i+=r.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},u.prototype.toLocaleString=u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):n.apply(this,arguments)},u.prototype.equals=function(e){if(u.isBuffer(e))return this===e||0===u.compare(this,e);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var e="",t=M.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,i,o){if(A(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(o<=i&&n<=t)return 0;if(o<=i)return-1;if(n<=t)return 1;if(this===e)return 0;for(var r=(o>>>=0)-(i>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(r,s),l=this.slice(i,o),c=e.slice(t,n),d=0;d<a;++d)if(l[d]!==c[d]){r=l[d],s=c[d];break}return r<s?-1:s<r?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return f(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return f(this,e,t,n,!1)},u.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i=i||"utf8";for(var r,s,a,l=!1;;)switch(i){case"hex":var c=this,d=e,u=t,h=n,f=(u=Number(u)||0,c.length-u);(!h||f<(h=Number(h)))&&(h=f),(f=d.length)/2<h&&(h=f/2);for(var p=0;p<h;++p){var g=parseInt(d.substr(2*p,2),16);if(S(g))return p;c[u+p]=g}return p;case"utf8":case"utf-8":return f=t,a=n,$(T(e,(s=this).length-f),s,f,a);case"ascii":return m(this,e,t,n);case"latin1":case"binary":return m(this,e,t,n);case"base64":return s=this,a=t,r=n,$(L(e),s,a,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function g(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function w(e,t,n,i,o,r){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<r)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function b(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,i,o){return t=+t,n>>>=0,o||b(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function x(e,t,n,i,o){return t=+t,n>>>=0,o||b(e,0,n,8),r.write(e,t,n,i,52,8),n+8}u.prototype.slice=function(e,t){var n=this.length,n=((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),this.subarray(e,t));return n.__proto__=u.prototype,n},u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return i},u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var i=this[e+--t],o=1;0<t&&(o*=256);)i+=this[e+--t]*o;return i},u.prototype.readUInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var i=this[e],o=1,r=0;++r<t&&(o*=256);)i+=this[e+r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||g(e,t,this.length);for(var i=t,o=1,r=this[e+--i];0<i&&(o*=256);)r+=this[e+--i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},u.prototype.readInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt16BE=function(e,t){e>>>=0,t||g(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||g(e,4,this.length),r.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||g(e,4,this.length),r.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||g(e,8,this.length),r.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||g(e,8,this.length),r.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||w(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,r=0;for(this[t]=255&e;++r<n&&(o*=256);)this[t+r]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||w(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,r=1;for(this[t+o]=255&e;0<=--o&&(r*=256);)this[t+o]=e/r&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,n,i){e=+e,t>>>=0,i||w(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,r=1,s=0;for(this[t]=255&e;++o<n&&(r*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,i){e=+e,t>>>=0,i||w(this,e,t,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,r=1,s=0;for(this[t+o]=255&e;0<=--o&&(r*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/r>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||w(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return x(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return x(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,i){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n=n||0,i||0===i||(i=this.length),t>=e.length&&(t=e.length),(i=0<i&&i<n?n:i)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length);var o=(i=e.length-t<i-n?e.length-t+n:i)-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,i);else if(this===e&&n<t&&t<i)for(var r=o-1;0<=r;--r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,i),t);return o},u.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);var o;1===e.length&&(o=e.charCodeAt(0),"utf8"===i&&o<128||"latin1"===i)&&(e=o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");var r;if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(r=t;r<n;++r)this[r]=e;else{var s=u.isBuffer(e)?e:u.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=s[r%a]}return this};var C=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var n,i=e.length,o=null,r=[],s=0;s<i;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&r.push(239,191,189);continue}if(s+1===i){-1<(t-=3)&&r.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&r.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&r.push(239,191,189);if(o=null,n<128){if(--t<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function L(e){return I.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function S(e){return e!=e}}.call(this)}.call(this,O("buffer").Buffer)},{"base64-js":7,buffer:8,ieee754:10}],9:[function(e,t,n){var i,o;i=this,o=function(){"use strict";function i(e,t,n){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(n)+e}function n(e){return e instanceof x}function r(e,t,n){var i;if(!e)return c;if("string"==typeof e){var o=e.toLowerCase(),t=(d[o]&&(i=o),t&&(d[o]=t,i=o),e.split("-"));if(!i&&1<t.length)return r(t[0])}else{o=e.name;d[o]=e,i=o}return!n&&i&&(c=i),i||!n&&c}function s(e,t){return n(e)?e.clone():((t="object"==typeof t?t:{}).date=e,t.args=arguments,new x(t))}var o="millisecond",u="second",h="minute",f="hour",p="day",g="week",m="month",a="quarter",y="year",v="date",w="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,e={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},t={s:i,z:function(e){var e=-e.utcOffset(),t=Math.abs(e),n=Math.floor(t/60),t=t%60;return(e<=0?"+":"-")+i(n,2,"0")+":"+i(t,2,"0")},m:function e(t,n){var i,o,r;return t.date()<n.date()?-e(n,t):(i=12*(n.year()-t.year())+(n.month()-t.month()),r=n-(o=t.clone().add(i,m))<0,t=t.clone().add(i+(r?-1:1),m),+(-(i+(n-o)/(r?o-t:t-o))||0))},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:m,y:y,w:g,d:p,D:v,h:f,m:h,s:u,ms:o,Q:a}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},c="en",d={},k=(d[c]=e,t),x=(k.l=r,k.i=n,k.w=function(e,t){return s(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})},(e=I.prototype).parse=function(r){this.$d=function(){var e=r.date,t=r.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(!(e instanceof Date||"string"!=typeof e||/Z$/i.test(e))){var n,i,o=e.match(l);if(o)return n=o[2]-1||0,i=(o[7]||"0").substring(0,3),t?new Date(Date.UTC(o[1],n,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)):new Date(o[1],n,o[3]||1,o[4]||0,o[5]||0,o[6]||0,i)}return new Date(e)}(),this.$x=r.x||{},this.init()},e.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},e.$utils=function(){return k},e.isValid=function(){return!(this.$d.toString()===w)},e.isSame=function(e,t){e=s(e);return this.startOf(t)<=e&&e<=this.endOf(t)},e.isAfter=function(e,t){return s(e)<this.startOf(t)},e.isBefore=function(e,t){return this.endOf(t)<s(e)},e.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},e.unix=function(){return Math.floor(this.valueOf()/1e3)},e.valueOf=function(){return this.$d.getTime()},e.startOf=function(e,t){function n(e,t){return t=k.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o),r?t:t.endOf(p)}function i(e,t){return k.w(o.toDate()[e].apply(o.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),o)}var o=this,r=!!k.u(t)||t,t=k.p(e),s=this.$W,a=this.$M,l=this.$D,c="set"+(this.$u?"UTC":"");switch(t){case y:return r?n(1,0):n(31,11);case m:return r?n(1,a):n(0,a+1);case g:var d=this.$locale().weekStart||0,d=(s<d?s+7:s)-d;return n(r?l-d:l+(6-d),a);case p:case v:return i(c+"Hours",0);case f:return i(c+"Minutes",1);case h:return i(c+"Seconds",2);case u:return i(c+"Milliseconds",3);default:return this.clone()}},e.endOf=function(e){return this.startOf(e,!1)},e.$set=function(e,t){var e=k.p(e),n="set"+(this.$u?"UTC":""),n=((i={}).day=n+"Date",i[v]=n+"Date",i[m]=n+"Month",i[y]=n+"FullYear",i[f]=n+"Hours",i[h]=n+"Minutes",i[u]=n+"Seconds",i[o]=n+"Milliseconds",i[e]),i=e===p?this.$D+(t-this.$W):t;return e===m||e===y?((t=this.clone().set(v,1)).$d[n](i),t.init(),this.$d=t.set(v,Math.min(this.$D,t.daysInMonth())).$d):n&&this.$d[n](i),this.init(),this},e.set=function(e,t){return this.clone().$set(e,t)},e.get=function(e){return this[k.p(e)]()},e.add=function(n,e){function t(e){var t=s(i);return k.w(t.date(t.date()+Math.round(e*n)),i)}var i=this,e=(n=Number(n),k.p(e));return e===m?this.set(m,this.$M+n):e===y?this.set(y,this.$y+n):e===p?t(1):e===g?t(7):(e={minute:6e4,hour:36e5,second:1e3}[e]||1,e=this.$d.getTime()+n*e,k.w(e,this))},e.subtract=function(e,t){return this.add(-1*e,t)},e.format=function(e){var o,n,t,i,r,s,a,l,c,d,u=this,h=this.$locale();return this.isValid()?(o=e||"YYYY-MM-DDTHH:mm:ssZ",n=k.z(this),t=this.$H,e=this.$m,i=this.$M,r=h.weekdays,s=h.months,a=function(e,t,n,i){return e&&(e[t]||e(u,o))||n[t].slice(0,i)},l=function(e){return k.s(t%12||12,e,"0")},c=h.meridiem||function(e,t,n){e=e<12?"AM":"PM";return n?e.toLowerCase():e},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:i+1,MM:k.s(i+1,2,"0"),MMM:a(h.monthsShort,i,s,3),MMMM:a(s,i),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:a(h.weekdaysMin,this.$W,r,2),ddd:a(h.weekdaysShort,this.$W,r,3),dddd:r[this.$W],H:String(t),HH:k.s(t,2,"0"),h:l(1),hh:l(2),a:c(t,e,!0),A:c(t,e,!1),m:String(e),mm:k.s(e,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:n},o.replace(b,function(e,t){return t||d[e]||n.replace(":","")})):h.invalidDate||w},e.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},e.diff=function(e,t,n){var t=k.p(t),e=s(e),i=6e4*(e.utcOffset()-this.utcOffset()),o=this-e,e=k.m(this,e),r={};return r[y]=e/12,r[m]=e,r[a]=e/3,r[g]=(o-i)/6048e5,r.day=(o-i)/864e5,r[f]=o/36e5,r[h]=o/6e4,r[u]=o/1e3,e=r[t]||o,n?e:k.a(e)},e.daysInMonth=function(){return this.endOf(m).$D},e.$locale=function(){return d[this.$L]},e.locale=function(e,t){var n;return e?(n=this.clone(),(e=r(e,t,!0))&&(n.$L=e),n):this.$L},e.clone=function(){return k.w(this.$d,this)},e.toDate=function(){return new Date(this.valueOf())},e.toJSON=function(){return this.isValid()?this.toISOString():null},e.toISOString=function(){return this.$d.toISOString()},e.toString=function(){return this.$d.toUTCString()},I),C=x.prototype;function I(e){this.$L=r(e.locale,null,!0),this.parse(e)}return s.prototype=C,[["$ms",o],["$s",u],["$m",h],["$H",f],["$W",p],["$M",m],["$y",y],["$D",v]].forEach(function(t){C[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),s.extend=function(e,t){return e.$i||(e(t,x,s),e.$i=!0),s},s.locale=r,s.isDayjs=n,s.unix=function(e){return s(1e3*e)},s.en=d[c],s.Ls=d,s.p={},s},"object"==typeof n&&void 0!==t?t.exports=o():"function"==typeof define&&define.amd?define(o):(i="undefined"!=typeof globalThis?globalThis:i||self).dayjs=o()},{}],10:[function(e,t,n){n.read=function(e,t,n,i,o){var r,s,a=8*o-i-1,l=(1<<a)-1,c=l>>1,d=-7,u=n?o-1:0,h=n?-1:1,o=e[t+u];for(u+=h,r=o&(1<<-d)-1,o>>=-d,d+=a;0<d;r=256*r+e[t+u],u+=h,d-=8);for(s=r&(1<<-d)-1,r>>=-d,d+=i;0<d;s=256*s+e[t+u],u+=h,d-=8);if(0===r)r=1-c;else{if(r===l)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,i),r-=c}return(o?-1:1)*s*Math.pow(2,r-i)},n.write=function(e,t,n,i,o,r){var s,a,l=8*r-o-1,c=(1<<l)-1,d=c>>1,u=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:r-1,f=i?1:-1,r=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-s))<1&&(s--,i*=2),2<=(t+=1<=s+d?u/i:u*Math.pow(2,1-d))*i&&(s++,i/=2),c<=s+d?(a=0,s=c):1<=s+d?(a=(t*i-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));8<=o;e[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;0<l;e[n+h]=255&s,h+=f,s/=256,l-=8);e[n+h-f]|=128*r}},{}],11:[function(e,t,n){var i,o;i=this,o=function(e){function n(e){return new n.lib.init(e)}function r(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function a(e,t){return!(!e||"string"!=typeof t||!(e.className&&-1<e.className.trim().split(/\s+/gi).indexOf(t)))}return n.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},n.lib=n.prototype={toastify:"1.12.0",constructor:n,init:function(e){return e=e||{},this.options={},this.toastElement=null,this.options.text=e.text||n.defaults.text,this.options.node=e.node||n.defaults.node,this.options.duration=0===e.duration?0:e.duration||n.defaults.duration,this.options.selector=e.selector||n.defaults.selector,this.options.callback=e.callback||n.defaults.callback,this.options.destination=e.destination||n.defaults.destination,this.options.newWindow=e.newWindow||n.defaults.newWindow,this.options.close=e.close||n.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":n.defaults.gravity,this.options.positionLeft=e.positionLeft||n.defaults.positionLeft,this.options.position=e.position||n.defaults.position,this.options.backgroundColor=e.backgroundColor||n.defaults.backgroundColor,this.options.avatar=e.avatar||n.defaults.avatar,this.options.className=e.className||n.defaults.className,this.options.stopOnFocus=(void 0===e.stopOnFocus?n.defaults:e).stopOnFocus,this.options.onClick=e.onClick||n.defaults.onClick,this.options.offset=e.offset||n.defaults.offset,this.options.escapeMarkup=(void 0!==e.escapeMarkup?e:n.defaults).escapeMarkup,this.options.ariaLive=e.ariaLive||n.defaults.ariaLive,this.options.style=e.style||n.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e,t,n,i,o=document.createElement("div");for(e in o.className="toastify on "+this.options.className,this.options.position?o.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(o.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):o.className+=" toastify-right",o.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)o.style[e]=this.options.style[e];return this.options.ariaLive&&o.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE?o.appendChild(this.options.node):(this.options.escapeMarkup?o.innerText=this.options.text:o.innerHTML=this.options.text,""!==this.options.avatar&&((i=document.createElement("img")).src=this.options.avatar,i.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?o.appendChild(i):o.insertAdjacentElement("afterbegin",i))),!0===this.options.close&&((i=document.createElement("button")).type="button",i.setAttribute("aria-label","Close"),i.className="toast-close",i.innerHTML="&#10006;",i.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this)),n=0<window.innerWidth?window.innerWidth:screen.width,("left"==this.options.position||!0===this.options.positionLeft)&&360<n?o.insertAdjacentElement("afterbegin",i):o.appendChild(i)),this.options.stopOnFocus&&0<this.options.duration&&(t=this,o.addEventListener("mouseover",function(e){window.clearTimeout(o.timeOutValue)}),o.addEventListener("mouseleave",function(){o.timeOutValue=window.setTimeout(function(){t.removeElement(o)},t.options.duration)})),void 0!==this.options.destination&&o.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&o.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset&&(n=r("x",this.options),i=r("y",this.options),n="left"==this.options.position?n:"-"+n,i="toastify-top"==this.options.gravity?i:"-"+i,o.style.transform="translate("+n+","+i+")"),o},showToast:function(){var e,t;if(this.toastElement=this.buildToast(),e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body)return t=n.defaults.oldestFirst?e.firstChild:e.lastChild,e.insertBefore(this.toastElement,t),n.reposition(),0<this.options.duration&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this;throw"Root element is not defined"},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),n.reposition()}.bind(this),400)}},n.reposition=function(){for(var e={top:15,bottom:15},t={top:15,bottom:15},n={top:15,bottom:15},i=document.getElementsByClassName("toastify"),o=0;o<i.length;o++){var r=!0===a(i[o],"toastify-top")?"toastify-top":"toastify-bottom",s=i[o].offsetHeight;r=r.substr(9,r.length-1);(0<window.innerWidth?window.innerWidth:screen.width)<=360?(i[o].style[r]=n[r]+"px",n[r]+=s+15):!0===a(i[o],"toastify-left")?(i[o].style[r]=e[r]+"px",e[r]+=s+15):(i[o].style[r]=t[r]+"px",t[r]+=s+15)}return this},n.lib.init.prototype=n.lib,n},"object"==typeof t&&t.exports?t.exports=o():i.Toastify=o()},{}],12:[function(e,t,n){"use strict";let i=!1;t.exports=class{constructor({}){const n=this;this.open=!1,i||($("body").on("click",".floating-menu-toggle",function(){n.toggleFloatingMenu({node:$(this)})}),$("body").click(function(e){var t;n.open&&(t=document.querySelector(".floating-menu.show"),e.target.classList.contains("floating-menu")||t&&t.contains(e.target)||n.closeAllFloatingMenus())})),i=!0}toggleFloatingMenu({node:e}){var t=e,n=$(t.data("floating-menu")),i=n.hasClass("show");const r=e.data("focus"),s=this;if(this.closeAllFloatingMenus(),!i){n.addClass("show").removeClass("editor"),$(".floating-menu-edit").removeClass("active");let o=n[0];const a=document.querySelector(".floating-menu-arrow"),l=t[0];stepCore.floatingUI.autoUpdate(l,o,()=>{stepCore.floatingUI.computePosition(l,o,{placement:"bottom",middleware:[stepCore.floatingUI.offset(10),stepCore.floatingUI.arrow({element:a}),stepCore.floatingUI.flip(),stepCore.floatingUI.size({apply({availableWidth:e,availableHeight:t,elements:n}){e=Math.max(e,window.innerWidth-30),Object.assign(n.floating.style,{maxWidth:e+"px",maxHeight:t+"px"})}})]}).then(({x:e,y:t,placement:n,middlewareData:i})=>{e=Math.max(e,0),Object.assign(o.style,{left:e+"px",top:t+"px"});var{x:e,y:t}=i.arrow,i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];a&&Object.assign(a.style,{left:null!=e?e+"px":"",top:null!=t?t+"px":"",right:"",bottom:"",[i]:"-4px"})}),setTimeout(()=>{s.open=!0,r&&$(r).focus()},1)})}}closeAllFloatingMenus(){const e=this;$(".floating-menu-toggle").each(function(){e.closeFloatingMenu({node:$(this)})}),this.open=!1}closeFloatingMenu({node:e}){$(e.data("floating-menu")).removeClass("show")}}},{}],13:[function(e,t,n){"use strict";t.exports=class{constructor({elementId:e,languages:t,selectedLanguage:n,selectAction:i,displaySelected:o,closeOnDefocus:r=!0,initialize:s=!0}){this.elementId=e,this.selectAction=i,this.closeOnDefocus=r,s&&this.initialize({elementId:e,selectAction:i}),this.selectedLanguage=n,this.languages=t.sort((e,t)=>e.name>t.name?1:-1),this.displaySelected=o}initialize({elementId:t,selectAction:e}){t=t||this.elementId,e=e||this.selectAction,this.node=$("#"+t);const n=this;this.node.on("click",".translate-toggle",function(){n.open()}),this.node.on("click",".language-select-item",function(){var e=$(this).data("id");n.selectOption({id:e})}),this.node.on("keyup",".language-search",function(e){return 13==e.keyCode?(e.preventDefault(),n.enterKeyPress()):40==e.keyCode?(e.preventDefault(),n.downKeyPress()):38==e.keyCode?(e.preventDefault(),n.upKeyPress()):void n.keypress()}),this.closeOnDefocus&&$("body").click(function(e){e.target.id==t||function(e){if(!$(e.target).closest("body").length)return 1;e=$(e.target).closest(".translate-panel");if(!e.length)return;e=e.prop("id");return e==t}(e)||(n.displaySelected&&n.selectedLanguage?$(".translate-lookup-options").html(""):n.close())}),this.selectAction=e}open(){this.node.addClass("open"),$(".definition-selector-search").val(""),this.updateList({string:null}),this.node.find(".language-search").focus()}close(){this.node.removeClass("open")}updateList({string:e}){var t=e&&e.length?this.filterList({string:e}):this.languages;let n="";for(let e=0;e<t.length;e++){var i=t[e];n+=`
         <div class="language-select-item" data-id="${i.id}">
            <div class="language-select-item-en">${i.name}</div>
            ${i.versions.length?`<div class="language-select-item-native">${i.versions[0].wording}</div>`:""} 
         </div>`}this.node.find(".translate-lookup-options").html(n)}enterKeyPress(){var e=$(".language-select-item.selected");1==e.length&&(e=e.data("id"),this.selectOption({id:e}))}downKeyPress(){var e=this.node.find(".language-select-item.selected");if(!e.length)return this.node.find(".language-select-item").first().addClass("selected");e.next().hasClass("language-select-item")&&(e.removeClass("selected"),e.next().addClass("selected"))}upKeyPress(){var e=this.node.find(".language-select-item.selected");e.prev().hasClass("language-select-item")&&(e.removeClass("selected"),e.prev().addClass("selected"))}keypress(){var e=this.node.find(".language-search").val().trim();this.updateList({string:e})}filterList({string:n}){var i=[];for(let e=0;e<this.languages.length;e++){var o=this.languages[e];let t=this.matchString({referenceString:o.name,testString:n});for(let e=0;e<o.versions.length;e++){var r=o.versions[e],r=this.matchString({referenceString:r.wording,testString:n});t=Math.max(t,r)}(o.score=t)&&i.push(o)}return i.sort((e,t)=>e.score<t.score?1:-1),i}matchString({referenceString:e,testString:t}){return e=e.toLowerCase(),t=t.toLowerCase(),e.match(new RegExp("^"+t+".*","gi"))?2:e.includes(t)?1:0}selectOption({id:t}){this.selectedLanguage=t,this.selectAction(arguments[0]);for(let e=0;e<this.languages.length;e++){var n=this.languages[e];n.id==t&&$(".language-search").val(n.name)}$(".translate-lookup-options").html("")}}},{}],14:[function(e,t,n){"use strict";const l=e("toastify-js");t.exports=function({type:e,duration:t=96e3,heading:n,message:i,style:o}){let r=`
   <div class="toastify-container">`;var s={error:"Something went wrong",access:"Access denied",success:"Success"};(void 0===n&&s[e]||n)&&(r+=`
      <div class="toastify-heading">
         ${n||s[e]}
      </div>`),i&&(r+=`
      <div class="toastify-message">
         ${i}
      </div>
      `),r+=`
   </div>`;let a=o;a=a||e,l({text:r,duration:t,newWindow:!0,close:!0,className:a,gravity:"bottom",position:"right",stopOnFocus:!0,escapeMarkup:!1}).showToast()}},{"toastify-js":11}],15:[function(e,t,n){"use strict";class i{constructor({node:e,insert:t,insertClass:n,parent:i,externalListeners:o,clickOutAction:r,blockTooltipInitialize:s}){if(this.parent=i,this.isModal="modal"==t,this.listeners=[],e||"modal"==t||new Error(`Invalid node provided for ${this.constructor.name} component`),this.node="string"==typeof e?document.querySelector(e):e,this.node||t){if("tooltip"==t&&(this.targetNode=e),t&&(this.node=this.insertNode({insertClass:n,node:e,insert:t})),!t&&n){var a=n.split(" ").filter(e=>!!e);for(let e=0;e<a.length;e++){var l=a[e];this.node.classList.add(l)}}this.initProperties={insert:t,insertClass:n},this.componentId=this.generateKey({length:6}),this.node.setAttribute("data-component-id",this.componentId),this.externalListeners=o,(this.clickOutAction=r)&&this.addClickOutListener({action:r}),"tooltip"!=t||s||this.initializeTooltip()}}insertNode({insertClass:t,node:e,insert:n}){if("tooltip"==n&&(t="ui-tooltip "+(t||"")),"modal"==n){var i=document.createElement("div");i.classList.add("step-modal-container");let e="";return t&&t.includes("modal-")&&(o=t.split(" "),e=o.find(e=>e.startsWith("modal-")),t=o.filter(e=>!e.startsWith("modal-")).join(" ")),i.innerHTML=` 
         <div class="step-modal-overlay ${e}">
            <div class="step-modal-content ${t}" role="dialog" aria-modal="true"></div>
         </div>`,document.body.appendChild(i),document.body.classList.add("locked"),this.modalVisible=!0,i.querySelector(".step-modal-content")}var o=document.createElement("div"),r=(o.innerHTML=`<div class="${t||""}"></div>`,o.firstChild);switch(e||console.log("Error:  "+this.constructor.name),n){case"before":e.parentNode.insertBefore(r,e);break;case"after":e.parentNode.insertBefore(r,e.nextSibling);break;case"append":e.appendChild(r);break;case"prepend":e.insertBefore(r,e.firstChild);break;case"tooltip":document.body.appendChild(r);break;default:throw new Error("Invalid insertType provided")}return r}insertMarkup({markup:e,node:t,insert:n="append"}){var i=document.createElement("div"),o=(i.innerHTML=e,Array.from(i.childNodes));switch(n){case"before":o.forEach(e=>{t.parentNode.insertBefore(e,t)});break;case"after":o.reverse().forEach(e=>{t.parentNode.insertBefore(e,t.nextSibling)});break;case"append":o.forEach(e=>{t.appendChild(e)});break;case"prepend":o.reverse().forEach(e=>{t.insertBefore(e,t.firstChild)});break;default:throw new Error("Invalid insertType provided")}return o}generateKey({length:e=5}){return Math.random().toString(36).substring(e)}async addClickOutListener({}){if(await new Promise(e=>setTimeout(e,1)),this.isModal)this.modalClickOutHandler=this.modalClickOutHandler.bind(this),this.node.parentNode.addEventListener("click",this.modalClickOutHandler),this.listeners.push({function:this.genericClickOut,events:["modalClickOut"]});else{this.listeners.some(e=>e.events.includes("clickOut"))||(this.clickOutHandler=this.clickOutHandler.bind(this),document.addEventListener("click",this.clickOutHandler)),this.listeners.push({function:this.genericClickOut,events:["clickOut"]}),this.eventListenerClass||(this.eventListenerClass=this.generateKey({length:6})),this.node.classList.contains(this.eventListenerClass)||this.node.classList.add(this.eventListenerClass);let e=this.node.getAttribute("data-action");e&&(e+=",genericClickOut"),e=e||"genericClickOut",this.node.setAttribute("data-action",e)}}registerListeners({className:e,listeners:t}){this.eventListenerClass=e,this.listeners=t,this.listeners.some(e=>e.events.includes("click"))&&(this.clickHandler=this.clickHandler.bind(this),this.node.addEventListener("click",this.clickHandler)),this.listeners.some(e=>e.events.includes("clickOut"))&&(this.clickOutHandler=this.clickOutHandler.bind(this),document.addEventListener("click",this.clickOutHandler)),this.listeners.some(e=>e.events.includes("modalClickOut"))&&(this.modalClickOutHandler=this.modalClickOutHandler.bind(this),this.node.parentNode.addEventListener("click",this.modalClickOutHandler));const n=["enter","backspace","keyDown","keyUp"];this.listeners.some(e=>e.events.some(e=>n.includes(e)))&&(this.keyDownHandler=this.keyDownHandler.bind(this),this.node.addEventListener("keydown",this.keyDownHandler)),this.listeners.some(e=>e.events.some(e=>n.includes(e)))&&(this.keyUpHandler=this.keyUpHandler.bind(this),this.node.addEventListener("keyup",this.keyUpHandler)),this.listeners.some(e=>e.events.includes("input"))&&(this.inputHandler=this.inputHandler.bind(this),document.addEventListener("input",this.inputHandler)),this.listeners.some(e=>e.events.includes("change"))&&(this.changeHandler=this.changeHandler.bind(this),document.addEventListener("change",this.changeHandler)),this.listeners.some(e=>e.events.includes("focus"))&&(this.focusHandler=this.focusHandler.bind(this),document.addEventListener("focus",this.focusHandler,!0)),this.listeners.some(e=>e.events.includes("blur"))&&(this.blurHandler=this.blurHandler.bind(this),document.addEventListener("blur",this.blurHandler,!0)),this.listeners.some(e=>e.events.includes("message"))&&(this.windowEventHandler=this.windowEventHandler.bind(this),window.addEventListener("message",this.windowEventHandler))}async clickHandler(t){let n=t.target;if(await new Promise(e=>setTimeout(e,1)),n.closest(`[data-component-id="${this.componentId}"]`)){let e=n.matches("."+this.eventListenerClass);var i,o;e||(e=n.closest("."+this.eventListenerClass),n=e),e&&(this.handleEvent({node:n,type:"click",alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey}),n.classList.contains("ripple"))&&(i=n.getBoundingClientRect(),o=t.clientX-i.left,t=t.clientY-i.top,this.insertMarkup({markup:`<span class="ripple-animation" style="left: ${o}px; top: ${t}px"/></span>`,node:n}))}}modalClickOutHandler(t){if(t.target.classList.contains("step-modal-overlay"))for(let e=0;e<this.listeners.length;e++){var n=this.listeners[e];n.events.includes("modalClickOut")&&n.function.bind(this)({event:t})}}clickOutHandler(t){var n=t.target;this.componentId;for(let e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.events.includes("clickOut")){let e=document.querySelector(`[data-component-id="${this.componentId}"] [data-action="${i.function.name}"]`);(e=e||document.querySelector(`[data-component-id="${this.componentId}"][data-action="${i.function.name}"]`))&&!e.contains(n)&&i.function.bind(this)({event:t})}}}keyDownHandler(t){var n=t.target;for(let e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i&&i.events.includes("keyDown")){if(!i.global){if(!n.closest(`[data-component-id="${this.componentId}"]`))return;if(!n.matches("."+this.eventListenerClass))continue;if(!n.getAttribute("data-action").split(",").includes(i.function.name))continue}this.isKeyRelevant({keyFilter:i.keyFilter,keyCode:t.keyCode})&&i.function.bind(component)({event:t})}}}keyUpHandler(t){t.stopPropagation();var n=t.target;for(let e=0;e<this.listeners.length;e++){var i=this.listeners[e];if(i.function){if(!i.global){if(!n.closest(`[data-component-id="${this.componentId}"]`))continue;if(!n.matches("."+this.eventListenerClass))continue;if(!n.getAttribute("data-action").split(",").includes(i.function.name))continue}if(13==t.keyCode)i.events.includes("enter")&&this.handleEvent({node:n,type:"enter",alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey});else if(8==t.keyCode)i.events.includes("backspace")&&this.handleEvent({node:n,type:"backspace",alt:t.altKey,ctrl:t.ctrlKey,shift:t.shiftKey});else if(i.events.includes("keyUp")){if("Alt"===t.key||"AltLeft"===t.code||"AltRight"===t.code)return;if("Control"===t.key||"ControlLeft"===t.code||"ControlRight"===t.code)return;if("Shift"===t.key||"ShiftLeft"===t.code||"ShiftRight"===t.code)return;for(let e=0;e<this.listeners.length;e++){var o=this.listeners[e];o.function&&o.events.includes("keyUp")&&this.isKeyRelevant({keyFilter:o.keyFilter,keyCode:t.keyCode})&&o.function.bind(this)({event:t})}}}}}changeHandler(e){var t=this.testHandlerMatch({event:e});t&&this.handleEvent({node:t,type:"change",event:e})}inputHandler(e){var t=this.testHandlerMatch({event:e});t&&this.handleEvent({node:t,type:"input",event:e})}focusHandler(e){var t=this.testHandlerMatch({event:e});t&&this.handleEvent({node:t,type:"focus",event:e})}blurHandler(e){var t=this.testHandlerMatch({event:e});t&&this.handleEvent({node:t,type:"blur",event:e})}testHandlerMatch({event:e}){let t=e.target;if(t.closest(`[data-component-id="${this.componentId}"]`)){let e=t.matches("."+this.eventListenerClass);if(e||(e=t.closest("."+this.eventListenerClass),t=e),e)return t}}windowEventHandler(e){if(e.data){var t=e.data;if(document.querySelector(`[data-component-id="${this.componentId}"]`)&&document.querySelector(`[data-component-id="${this.componentId}"]`).hasChildNodes()&&(!t.key||t.key===this.componentId))for(const i in this.listeners){var n=this.listeners[i];n.function&&n.events.includes("message")&&n.function.name==t.type&&n.function.bind(this)(t)}}}childEventHandler({action:t,data:n,sourceObject:i}){if(this.listeners)for(let e=0;e<this.listeners.length;e++){var o=this.listeners[e];if(o&&o.function)if(o.events.includes("childEvent")&&o.function.name==t)if(o.function.bind(this)({data:n,sourceObject:i}),o.stopPropagation)return}this.parent&&"function"==typeof this.parent.childEventHandler&&this.parent.childEventHandler({action:t,data:n,sourceObject:i})}propertySearch({key:e,objectName:t}){return t&&this.constructor.name!=t||void 0===this[e]?this.parent&&"function"==typeof this.parent.childEventHandler?this.parent.propertySearch({key:e,objectName:t}):void 0:this[e]}isKeyRelevant({keyFilter:e,keyCode:t}){return!e||!!(e.includes("enter")&&13===t||e.includes("backspace")&&8===t||e.includes(t))||void 0}handleEvent({node:e,type:t,alt:n,ctrl:i,shift:o,event:r}){var s=t.charAt(0).toUpperCase()+t.slice(1),a={},l=e.dataset;for(const u in l)a[u]=l[u];var c=a.action.split(",");if(!c.length)return console.error("No action found for clicked node");for(const h in this.listeners){var d=this.listeners[h];!d.function||!(n||i||d.events.includes(t))||n&&!d.events.includes("alt"+s)||i&&!d.events.includes("ctrl"+s)||o&&!d.events.includes("shift"+s)||c.includes(d.function.name)&&(a.event=r,a.clickedNode=e,a.alt=n,a.ctrl=i,a.shift=o,d.function.bind(this)(a))}}async remove(){if(this.listeners){this.listeners.some(e=>e.events.includes("click"))&&this.node.removeEventListener("click",this.clickHandler),this.listeners.some(e=>e.events.includes("clickOut"))&&document.removeEventListener("click",this.clickOutHandler),this.listeners.some(e=>e.events.includes("modalClickOut"))&&this.node.parentNode.removeEventListener("click",this.modalClickOutHandler);const i=["enter","backspace","keyDown","keyUp"];this.listeners.some(e=>e.events.some(e=>i.includes(e)))&&this.node.removeEventListener("keydown",this.keyDownHandler),this.listeners.some(e=>e.events.some(e=>i.includes(e)))&&this.node.removeEventListener("keyup",this.keyUpHandler),this.listeners.some(e=>e.events.includes("message"))&&window.removeEventListener("message",this.windowEventHandler)}if(!this.initProperties.insert&&this.initProperties.insertClass){var t=this.initProperties.insertClass.split(" ").filter(e=>!!e);for(let e=0;e<t.length;e++){var n=t[e];this.node.classList.remove(n)}}this.initProperties.insert?this.isModal?(this.node.parentNode.parentNode.classList.add("closing"),await new Promise(e=>setTimeout(e,400)),this.node.parentNode.parentNode.remove(),document.body.classList.remove("locked")):this.node.remove():this.node.innerHTML=""}getNode(e){return this.node.querySelector(e)}getAllNodes(e){return this.node.querySelectorAll(e)}async show({selector:e,node:t,animate:n,selectAll:i}){if(i){if(t=this.getAllNodes(e))for(let e=0;e<t.length;e++){var o=t[e];this.show({node:o,animate:n})}}else(t=e?this.getNode(e):t)&&(t.classList.remove("hide"),n)&&((n+"").includes("fade-in-")?(t.classList.remove("hide-placeholder"),t.classList.add(n),await this.wait(600),t.classList.remove(n)):(t.classList.add("fade-in"),await this.wait(600),t.classList.remove("fade-in"),t.classList.remove("hide-placeholder")))}async hide({selector:e,node:t,animate:n,selectAll:i}){if(i){if(t=this.getAllNodes(e))for(let e=0;e<t.length;e++){var o=t[e];this.hide({node:o,animate:n})}}else(t=e?this.getNode(e):t)&&(n&&(t.classList.add("fade-out"),await new Promise(e=>setTimeout(e,600))),t.classList.add("hide"),n)&&t.classList.remove("fade-out")}addClass({node:t,selector:e,selectAll:n,className:i}){if(n){if(t=this.getAllNodes(e))for(let e=0;e<t.length;e++)t[e].classList.add(i)}else(t=e?this.getNode(e):t)&&t.classList.add(i)}removeClass({node:t,selector:e,selectAll:n,className:i}){if(n){if(t=this.getAllNodes(e))for(let e=0;e<t.length;e++)t[e].classList.remove(i)}else(t=e?this.getNode(e):t)&&t.classList.remove(i)}toggleClass({node:e,selector:t,className:n}){(e=t?this.getNode(t):e)&&e.classList.toggle(n)}fireExternalListenerEvents({eventTypes:t,data:n,sourceObject:i}){if(this.externalListeners)for(let e=0;e<this.externalListeners.length;e++){var o=this.externalListeners[e];t.includes(o.type)&&this.parent.childEventHandler({action:o.action,element:this,data:n,sourceObject:i||this})}}getAncestorObject({objectType:e}){if(Array.isArray(e)){if(e.includes(this.constructor.name))return this}else if(this.constructor.name==e)return this;return this.parent.getAncestorObject({objectType:e})}getAncestorProperty({property:e}){return this[e]||(this.parent?this.parent.getAncestorProperty({property:e}):null)}genericClickOut(){"warn"==this.clickOutAction&&confirm("Are you sure you want to close this?")&&this.remove(),"remove"==this.clickOutAction?this.remove():"hide"==this.clickOutAction?this.hideModal():"function"==typeof this.clickOutAction&&this.clickOutAction.bind(this.parent)({})}expandAccordion({node:e}){e.classList.remove("hide");var t=e.scrollHeight+"px";e.style.maxHeight=t,setTimeout(()=>{e.style.maxHeight="none"},500)}minimizeAccordion({node:e}){e.classList.add("hide");var t=e.scrollHeight+"px";e.style.maxHeight=t}async hideModal(){var e=this.node.parentNode.parentNode;e.classList.add("closing"),e.classList.add("hidden"),this.modalVisible=!1,document.body.classList.remove("locked")}unhideModal(){var e=this.node.parentNode.parentNode;e.classList.remove("closing"),e.classList.remove("hidden"),this.modalVisible=!0,document.body.classList.remove("locked")}initializeTooltip(){let o=this.node;const e=this.targetNode;stepCore.floatingUI.autoUpdate(e,o,()=>{stepCore.floatingUI.computePosition(e,o,{placement:"bottom",middleware:[stepCore.floatingUI.offset(10),stepCore.floatingUI.flip(),stepCore.floatingUI.size({apply({availableWidth:e,availableHeight:t,elements:n}){e=Math.max(e,window.innerWidth-30),Object.assign(n.floating.style,{maxWidth:e+"px",maxHeight:t+"px"})}})]}).then(({x:e,y:t,placement:n})=>{var i=document.body.offsetWidth-o.offsetWidth,i=(e=Math.min(e,i),Object.assign(o.style,{left:e+"px",top:t+"px"}),n.split("-")[0]);"top"===i?o.classList.add("top"):o.classList.remove("top")})})}scrollTo({scrollingObject:e=window,targetNode:t=this.node}){t=t.getBoundingClientRect().top;e.scrollBy({top:t,behavior:"smooth"})}checkVisibility({node:e}){var e=e.getBoundingClientRect(),t=window.innerHeight||document.documentElement.clientHeight,n=e.bottom>t,t=n?e.bottom-t:0,i=n?e.height-t:0,o=e.top<0,r=o?Math.abs(e.top):0;return{bottomClipped:n,bottomClipAmount:t,bottomVisibleAmount:i,topClipped:o,topClipAmount:r,topVisibleAmount:o?e.height-r:0}}async wait(t){await new Promise(e=>setTimeout(e,t))}async addSpinner({node:e,overlay:t,animate:n}){e=e||this.node;let i=`<div class="circular-loading-overlay ${n?"spinner-scale-in":""}"></div>`;t&&(i=`<div class="circular-loading-overlay-container">${i}</div>`,e.classList.add("circular-loading-parent")),this.insertMarkup({markup:i,node:e}),n&&(await this.wait(200),this.getNode(".circular-loading-overlay").classList.remove("spinner-scale-in"))}async removeSpinner({node:e,animate:t}){let n=(e=e||this.node).querySelector(":scope > .circular-loading-overlay");if(n=n||e.querySelector(":scope > .circular-loading-overlay-container")){t&&((n.classList.contains("circular-loading-overlay")?n:n.querySelector(".circular-loading-overlay")).classList.add("spinner-scale-out"),await this.wait(600));try{e.removeChild(n),e.classList.remove("circular-loading-parent")}catch(e){}}}getWording({id:e,definitionId:t,concept:n,defaultConcept:i,text:o,defaultText:r,capitalize:s}){var a=this.getAncestorProperty({property:"wordingModule"});return a&&(e||n||i||t)&&(a=a.get({id:e,concept:n||(e||t?null:i),definitionId:t,languageId:this.languageId,audience:this.audience,returnText:!0,removeGlossary:!0}))?2112==this.languageId?s(a):a:o?2112==this.languageId?s(o):o:r?2112==this.languageId?s(r):r:"";function s(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}}}t.exports={uiComponent:i,dialogComponent:class extends i{constructor({parent:e,heading:t,text:n,textInput:i,textInputValue:o,validation:r,buttons:s,icon:a,allowClickOut:l,externalListeners:c,insertClass:d}){super({insert:"modal",parent:e,externalListeners:c,insertClass:d}),this.validation=r,this.buttons=s,this.render({heading:t,text:n,textInput:i,textInputValue:o,buttons:s,icon:a});e=[{function:this.selection,events:["click","enter"]}];l&&e.push({function:this.remove,events:["modalClickOut"]}),this.registerListeners({className:"dialog-action",listeners:e})}render({heading:e,text:t,textInput:n,textInputValue:i,buttons:o,icon:r}){let s="";if(e&&(s+=`<div class="step-dialog-heading icon-${r}">${e}</div>`),t&&(s+=`<div class="step-dialog-text">${t}</div>`),n&&(s+=`
         <div class="step-dialog-text-input">
            <input type="text" value="${i||""}" />
         </div>`),o)for(let e=0;e<o.length;e++){var a=o[e];s+=`
            <button class="step-dialog-button icon-${a.icon} ${a.class||""} dialog-action" data-action="selection" data-key="${a.key}">
               ${a.label}
            </button>
            `}this.node.innerHTML=s}selection({key:t}){var e=this.buttons.find(e=>e.key==t);if(e.validate&&this.validation.required&&!this.getValue())return stepCore.toast({type:"error",duration:4e3,heading:"This field is required"});e=this.getValue();this.fireExternalListenerEvents({eventTypes:["dialogSelection"],data:{key:t,value:e}}),this.remove()}getValue(){if(this.getNode("input"))return this.getNode("input").value.trim()}}}},{}],16:[function(e,t,n){"use strict";t.exports=class{constructor({data:e=[],languageId:t,orgId:n,sourceObject:i}){this.data=e,this.sourceObject=i,this.languageId=t||(i&&i.languageId?i.languageId:null)||2112,this.orgId=n||(i&&i.orgId?i.orgId:null)||null}updateLanguageId({languageId:e}){this.languageId=e}async getWordingSet({types:e,languageId:t,orgId:n}){e=await stepCore.server.send({sendData:{types:e,languageId:t,orgId:n},url:"wordings/get",encoded:!0});"success"==e.status&&this.addNewWordings({items:e.data})}addNewWordings({items:t}){for(let e=0;e<t.length;e++){const i=t[e];var n=this.data.find(e=>e.id==i.id);if(n)for(let e=0;e<i.versions.length;e++){const o=i.versions[e];n.versions.find(e=>e.id==o.id)||n.versions.push(o)}else this.data.push(i)}}addTranslations({items:t,languageId:n}){for(let e=0;e<t.length;e++){var i=t[e];for(let e=0;e<this.data.length;e++){var o=this.data[e];i.id==o.id&&o.versions.push({audience:"client",default:!1,grammar:null,id:i.id,language_id:n,org_id:null,wording:i.wording})}}}get({id:e,definitionId:t,concept:n,audience:i,grammar:o,languageId:r,orgId:s,returnSet:a,returnText:l,returnId:c,lowerCase:d,returnAll:u,removeGlossary:h}){this.sourceObject&&(i=i||this.sourceObject.audience,r=r||this.sourceObject.languageId||2112,s=s||this.sourceObject.orgId),r=r||this.languageId||2112;let f;if(e&&(f=this.getWordingItem({id:e,audience:i,languageId:r})),(f=e?f:this.getWordingItem({definitionId:t,concept:n,audience:i,languageId:r}))&&f.versions.length){if(u)return f.versions.filter(e=>!r||r==e.language_id);var p=[];let t,n=-999;if(1==f.versions.length)f.versions[0].score=1,p.push(f.versions[0]),t=f.versions[0];else for(let e=0;e<f.versions.length;e++){var g,m=f.versions[e];m.org_id&&m.org_id!=s||((g=this.scoreCandidate({item:m,audience:i,grammar:o,languageId:r,orgId:s}))>n&&(t=m,n=g),a&&0<=g&&(m.score=g,p.push(m)))}if(a){if(p.sort((e,t)=>e.score<t.score?1:-1),h){var y=JSON.parse(JSON.stringify(p));for(let e=0;e<y.length;e++){const f=y[e];f.wording=this.removeGlossaryItems({text:f.wording})}return y}return p}if(c)return t?t.id:null;if(l||this.pathway&&!1!==l){let e=t.wording;return h&&(e=this.removeGlossaryItems({text:e})),t?d?e.toLowerCase():e:""}return t}console.log(`Wording not found: ID[${e}] Definition[${t}] Concept[${n}] languageId[${r}]`),"undefined"!=typeof server&&this.pathway&&stepCore.server.send({sendData:{type:"missing_wording",log:JSON.stringify({uuid:this.pathway.uuid,id:e,definitionId:t,concept:n,languageId:r})},url:"pathways/logError"})}removeGlossaryItems({text:e}){return e=e&&e.replace(/<a class="gc-ref .?" data-key="\d*"><\/a>/g,"")}getWordingItem({id:t,definitionId:n,concept:i}){for(let e=0;e<this.data.length;e++){var o=this.data[e];if(t&&o.id==t)return o;if(n&&o.definition_id==n)return o;if(i&&o.concept==i)return o}}scoreCandidate({item:e,audience:t,grammar:n,languageId:i=2112,orgId:o}){let r=0,s=(i==e.language_id&&(r=100),i&&!e.language_id&&(r=0),i&&e.language_id&&i!=e.language_id&&(r=-100),!i&&e.language_id&&(r=-100),0),a=(e.org_id==o&&(s=50),0),l=(n&&n==e.grammar&&(a=12),0),c=((l=(l=t&&t==e.audience?10:l)||"all"!=e.audience?l:8)||t&&(t==e.audience||!["client","advisor"].includes(e.audience))||(l="advisor"==e.audience?2:1),0);return e.default&&(c=5),r+s+a+l+c}}},{}],17:[function(e,t,n){"use strict";const o=e("../../../models/engagement/process/triggerTests/testConditions");var i=e("../../../models/engagement/process/flow/getNextInQueue");t.exports=class{constructor({panelNode:e,notificationNode:t,page:n,entryKey:i,userId:o,locationId:r,orgId:s,networkId:a}){this.panelNode=$(e),this.notificationNode=$(t),this.notificationsOpen=!1,this.notificationTooltip=null,this.page=n,this.entryKey=i,this.updatePageData({refreshReset:!0,pageLoad:!0,logPageView:!0}),this.activeItems=[],this.userData={},this.hiddenSteps=[],this.userId=o,this.locationId=r,this.orgId=s,this.networkId=a,this.resetCheckpointCache={};const l=this;$("body").on("click",".engagement-action",function(){var e=$(this).data("action"),t=$(this).data("value-1"),n=$(this).data("value-2");l.triggerEvent({eventType:e,value1:t,value2:n})}),$("body").on("click",".engagement-help-badge",function(){l.showTooltip({title:$(this).data("title"),text:$(this).data("text"),content:$(this).data("content"),target:$(this).data("target"),style:$(this).data("style"),position:$(this).data("position")?$(this).data("position"):"top"})}),$("body").on("click",".engagement-tooltip-close",function(){l.resetModal({key:"tooltip"})})}triggerEvent({eventType:e,value1:t,value2:n}){if("interactionEvent"==e&&this.interactionEvent({type:t,key:n}),"pageEvent"==e)return this.interactionEvent({event:t});"notificationsToggle"==e&&this.notificationsToggle(),"faqClick"==e&&this.faqToggle({key:t}),"moreText"==e&&this.moreTextToggle({key:t}),"minimize"==e&&this.hide({key:t})}async updatePageData({templateId:e=null,refreshReset:t,pageLoad:n,runItemUpdate:i,logPageView:o}){let r=await this.getData({templateId:e,runItemUpdate:i,logPageView:o});if(!r)return console.log("Error loading engagement");t&&(r=this.resetItems({data:r})),this.renderUI({data:r,pageLoad:n})}renderUI({data:e,pageLoad:t,checkpointResetFromCache:n,focusItem:i}){n&&(e=this.resetCheckpointsFromCache({data:e}));n=this.collateStepsByType({data:e,focusItem:i});this.resetModal({}),this.renderModals({data:n.modal,pageLoad:t}),this.renderPanel({data:n.panel}),this.renderNotifications({data:n.notification})}collateStepsByType({data:t}){var n={modal:[],panel:[],notification:[]};for(let e=0;e<t.length;e++){const o=t[e];var i=o.steps.filter(e=>e.key==o.stage)[0];i?this.hiddenSteps.includes(i.key)||("modal"==i.displayType?n.modal.push(o):o.channels.includes("panel")?n.panel.push(o):o.channels.includes("notification")&&n.notification.push(o)):console.log("error loading engagement step",o)}return n.modal.sort((e,t)=>e.focusItem<t.focusItem?1:-1),n}async getData({templateId:e,runItemUpdate:t,logPageView:n}){e=await stepCore.server.send({sendData:{page:this.page,entryKey:this.entryKey,templateId:e,runItemUpdate:t,logPageView:n},url:"engagement/getPageData"});if("success"==e.status)return this.activeItems=e.data.items,this.userData=e.data.userData,e.data.items;"error"==e.status&&console.log("error")}resetItems({data:t}){for(let e=0;e<t.length;e++){var n=t[e];this.resetItemCheckpoint({item:n})}return t}resetItemCheckpoint({item:e}){for(var t=e.history.length-1;0<=t;t--){const i=e.history[t];var n=e.steps.filter(e=>e.key==i)[0];if(n&&n.resetCheckpoint)return e.stage=i,this.resetCheckpointCache[e.id]={history:e.history.toString(),stage:e.stage},e}return e}resetCheckpointsFromCache({data:t}){for(let e=0;e<t.length;e++){var n=t[e],i=this.resetCheckpointCache[n.id];i&&n.stage!==i.stage&&n.history.toString()==i.history&&(n.stage=i.stage)}return t}renderPanel({data:e}){var n=e;if(n.length){let t="";for(let e=0;e<n.length;e++){const o=n[e];var i=o.steps.filter(e=>e.key==o.stage)[0];i?(i=this.renderStep({step:i,panelItem:o}),t+=i):console.log("error loading engagement step",o)}this.panelNode.html(t),t?this.panelNode.removeClass("hide"):this.panelNode.addClass("hide"),this.renderProgressMetre()}else this.panelNode.addClass("hide")}renderModals({data:e,pageLoad:t}){var n=e;for(let e=0;e<n.length;e++){const r=n[e];var i=r.steps.filter(e=>e.key==r.stage)[0];if(i){var o=this.renderStep({step:i,panelItem:r});if(!this.delayShowConditionsTriggered({step:i}))return void this.displayModal({itemMarkup:o,anchor:i.elementAnchor,pageLoad:t,key:i.key})}else console.log("error loading engagement step",r)}}renderStep({step:e,panelItem:t}){let n=`
         <div class="engagement-panel-item ${e.type||""} ${e.class||""}" data-key="${e.key}">`;"task"==e.type&&(e.hasOwnProperty("completion")?n+=`
               <div class="engagement-panel-item-progress"> 
                  <svg class="progress-circle" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none" data-value="${e.completion}">
                     <circle class="progress-circle" r="45" cx="50" cy="50" /> 
                     <path class="progress-circle-meter" d="M5,50a45,45 0 1,0 90,0a45,45 0 1,0 -90,0" stroke-linecap="round" stroke-linejoin="round" stroke-dashoffset="282.78302001953125" stroke-dasharray="282.78302001953125" /> 
                     <text x="50" y="50" text-anchor="middle" dominant-baseline="central" font-size="20"></text>
                  </svg>
               </div>`:n+=`
               <div class="engagement-panel-item-task-icon"></div>`,n+=`
            <div class="engagement-panel-item-task-body">`),n+=`
               <div class="engagement-panel-title ${e.icon&&"task"==e.type?"icon-"+e.icon:""}">
                  ${e.title}
                  <button class="engagement-panel-minimize engagement-action" data-action="minimize" data-value-1="${e.key}"></button>
               </div>`;var i=this.filterItemsByCondition({items:e.faq}),o=e.text||e.imageUrl||e.videoUrl||i.length;if(o){if(n+=' <div class="engagement-panel-body">',e.icon&&"task"!==e.type&&(n+=`
                  <div class="engagement-panel-body-icon">
                     <div class="engagement-panel-icon icon-${e.icon}"></div>
                  </div>`),n+=`
               <div class="engagement-panel-body-main">`,e.hasOwnProperty("completion")&&"task"!==e.type&&(n+=`<div class="engagement-panel-body-percentage">Setup: ${e.completion}%</div>  
                            <div class="engagement-panel-progress-container">
                                <div class="engagement-panel-progress-completed" style="width: ${e.completion}%"></div>
                            </div>`),n+=` 
                    `+("{message}"==e.text?t.message.replace(/\n/g,"<BR>"):e.text?e.text.replace(/\n/g,"<BR>"):""),e.moreText&&(n+=`
                        <div class="engagement-read-more-link engagement-action" data-action="moreText" data-value-1="${e.key}">Read more</div>
                        <div class="engagement-read-more-text" data-key="${e.key}">${e.moreText.replace(/\n/g,"<BR>")}
               </div>`),e.videoUrl&&(e.videoUrl.includes("vimeo")?n+=`
            <div class="engagement-video-container"> 
               <iframe src="${e.videoUrl}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;" title="Step v3"></iframe>
               <script src="https://player.vimeo.com/api/player.js"></script>  
            </div>
            `:n+=`
            <div class="engagement-video-container">
               ${e.videoUrl}
            </div>
            `),e.imageUrl&&(e.imageUrl.includes("<")?n+=e.imageUrl:n+=`
                     <div class="engagement-image-container">
                        <img class="engagement-image" src="${e.imageUrl}" />
                     </div>`),i.length){n+=`
               <div class="engagement-faq-container"> 
                  <div class="engagement-faq-label">FAQs</div> 

            `;for(let e=0;e<i.length;e++){var r=i[e];r.text&&(n+=`
                  <div class="engagement-faq" data-value-1="${r.key}">
                     <div class="engagement-faq-question engagement-action" data-action="faqClick" data-value-1="${r.key}">
                        ${r.label} 
                     </div>
                     <div class="engagement-faq-text">
                        ${r.text.replace(/\n/g,"<BR>")} 
                     </div> 
                  </div> 
                  `)}n+=` 
               </div>
            `}n+=`
            </div>
         </div>`}return n+=this.renderInteractions({step:e,bodyExists:o}),"task"==e.type&&(n+=`
         </div>
         `),n+=`
            </div>
         </div>`}delayShowConditionsTriggered({step:t}){if(!t.navigation)return!1;for(let e=0;e<t.navigation.length;e++){var n=t.navigation[e];if("delayShow"==n.action&&o({conditions:n.conditions,data:this.userData,userId:this.userId,locationId:this.locationId,orgId:this.orgId,networkId:this.networkId}))return!0}}async displayModal({itemMarkup:t,anchor:n,pageLoad:i=!1,style:o,key:s}){let a;if(n&&(n+=":visible",$(n).length?(n=$(n)[0],a=n):n=null),n&&a){this.scrollIntoViewWithOffset({selector:a,offset:200}),await this.delay(700);let e=`
         <div class="engagement-modal-attached-container ${o||""} fade-in" data-key="${s}">
            <div class="engagement-modal-attached">
               <div class="engagement-modal-attached-arrow"></div>
               ${t} 
            </div> 
         </div>
      `;const l=this;setTimeout(()=>{$("body").append(e);let o=document.querySelector(`.engagement-modal-attached-container[data-key="${s}"]`);const r=document.querySelector(".engagement-modal-attached-arrow");l.notificationTooltip=stepCore.floatingUI.autoUpdate(a,o,()=>{stepCore.floatingUI.computePosition(a,o,{placement:"top",middleware:[stepCore.floatingUI.offset(10),stepCore.floatingUI.arrow({element:r}),stepCore.floatingUI.flip(),stepCore.floatingUI.size({apply({availableWidth:e,availableHeight:t,elements:n}){e=Math.max(e,window.innerWidth-30),Object.assign(n.floating.style,{maxWidth:e+"px",maxHeight:t+"px"})}})]}).then(({x:e,y:t,placement:n,middlewareData:i})=>{e=Math.max(e,0),Object.assign(o.style,{left:e+"px",top:t+"px"});var{x:e,y:t}=i.arrow,i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];Object.assign(r.style,{left:null!=e?e+"px":"",top:null!=t?t+"px":"",right:"",bottom:"",[i]:"-4px"})})}),$(n).addClass("engagement-focus")},i?1500:0)}else{let e=`
      <div class="engagement-modal-container fade-in" data-key="${s}">
         <div class="engagement-modal">
            ${t}
         </div>
      </div>
      `;void setTimeout(()=>{$("body").append(e),$("html").addClass("pathway-modal-is-locked")},i?500:0)}}resetModal({key:e}){(e?($(`.engagement-modal-attached-container[data-key="${e}"]`).remove(),$(`.engagement-modal-container[data-key="${e}"]`)):($(".engagement-modal-attached-container").remove(),$(".engagement-modal-container"))).remove(),$(".engagement-focus").removeClass("engagement-focus"),$("html").removeClass("pathway-modal-is-locked")}renderNotifications({data:e}){var n=e;if(n.length){let t=`
      <button class="engagement-notification-icon-button engagement-action" data-action="notificationsToggle">
         <div class="engagement-notification-icon-badge">${n.length}</div>
      </button>

      <div class="engagement-notification-dropdown ${this.notificationsOpen?"":"hide"}">`;for(let e=0;e<n.length;e++){const o=n[e];var i=o.steps.filter(e=>e.key==o.stage)[0];i?(t+=`
         <div class="engagement-notification-dropdown-item">
            <div class="engagement-notification-icon-container">
               <div class="engagement-notification-icon icon-${i.icon||"bell"}"></div>
            </div>
            <div class="engagement-notification-body">
               <div class="engagement-notification-dropdown-item-title">
                  ${i.title}
               </div>`,i.text&&(t+=`  <div class="engagement-notification-dropdown-item-text">
                  ${"{message}"==i.text?o.message:i.text}
               </div>`),t=t+this.renderInteractions({step:i})+`</div>

         </div>
         `):console.log("error loading engagement step")}t+=`
      </div>
      `,this.notificationNode.html(t),this.notificationNode.removeClass("hide")}else this.notificationNode.addClass("hide")}async notificationsToggle(){var e;this.notificationsOpen?(this.notificationsOpen=!1,this.notificationNode.find(".engagement-notification-dropdown").addClass("hide")):(this.notificationsOpen=!0,this.notificationNode.find(".engagement-notification-dropdown").removeClass("hide"),e=this.activeItems.filter(e=>e.channels.includes("notification")).map(e=>e.id),await stepCore.server.send({sendData:{itemIds:e},url:"engagement/registerView"}))}renderInteractions({step:e,bodyExists:t}){let n="";var i=e.interaction.filter(e=>["button","text","textarea"].includes(e.type));if((i=this.filterItemsByCondition({items:i})).length){n+=`<div class="engagement-panel-interaction ${t?"":"no-body"} ${"multi"==e.interactionType?"multi survey":""}" data-key="${e.key}">`,"multi"==e.interactionType&&(n+=`
            <div class="question-multi-select-notice">
               You can pick multiple options
            </div>
         `);for(let e=0;e<i.length;e++){var o=i[e];"button"==o.type&&(n+=`
                    <button class="engagement-panel-button engagement-action ${o.class||""}" data-action="interactionEvent" data-value-1="${o.action||"none"}" data-value-2="${o.key}">`,o.icon&&(n+=`<div class="engagement-button-icon icon-${o.icon}"></div>`),n+=`
                        ${o.label}
                    </button>
                `),"text"==o.type&&(n+=`
               ${o.label?`<div class="engagement-panel-input-label">${o.label}</div>`:""}
               <div class="field-container">
                  <span class="field-icon icon-${o.icon}"></span>
                  <input type="text" class="engagement-panel-text-input" data-key="${o.key}">
               </div>
               `),"textarea"==o.type&&(n+=`
               ${o.label?`<div class="engagement-panel-input-label">${o.label}</div>`:""}
               <textarea class="engagement-panel-textarea" data-key="${o.key}"></textarea>
               `)}n+="</div>"}return n}filterItemsByCondition({items:t}){if(!t)return[];var n=[];for(let e=0;e<t.length;e++){var i=t[e];o({conditions:i.conditions,data:this.userData,userId:this.userId,locationId:this.locationId,orgId:this.orgId,networkId:this.networkId})&&n.push(i)}return n}interactionEvent({type:e,key:t,event:n}){const i=this.getStepInteraction({key:t,event:n});var o,r;if(i)return n=i.item.steps.filter(e=>e.key==i.item.stage)[0],"none"==e&&"multi"==n.interactionType&&$(`.engagement-panel-button[data-value-2="${t}"]`).toggleClass("selected"),e=this.getSelection({currentStep:n}),this.resetModal({key:n.key}),(o=this.getRelevantNavigation({interaction:i.interaction}))?"goToStep"==o.action?this.goToStep({interactionData:i,targetStepKey:o.goTo,selection:e,navigation:o}):"redirect"==o.action?this.redirect({interactionData:i,navigation:o,selection:e}):"nextInQueue"==o.action?(r=this.getNextInQueue({steps:i.item.steps,currentPriority:i.item.step_queue||0,data:this.userData,userId:this.userId,locationId:this.locationId,orgId:this.orgId,networkId:this.networkId}))?this.goToStep({interactionData:i,targetStepKey:r,selection:e,navigation:o}):this.complete({interactionData:i,selection:e,navigation:o}):"back"==o.action?this.back({interactionData:i}):"complete"==o.action?this.complete({interactionData:i,selection:e,navigation:o}):"hide"!=o.action?"delayShow"==o.action?this.showItem({step:n}):void 0:(this.hide({key:n.key}),void(i.interaction.runItemUpdate&&this.updatePageData({refreshReset:!1,runItemUpdate:!0}))):void 0;t&&console.log("Interaction item not found")}getRelevantNavigation({interaction:t}){for(let e=0;e<t.navigation.length;e++){var n=t.navigation[e];if(o({conditions:n.conditions,data:this.userData,userId:this.userId,locationId:this.locationId,orgId:this.orgId,networkId:this.networkId}))return n}}getSelection({currentStep:i}){const o=[];return $(`.engagement-panel-interaction[data-key="${i.key}"] .engagement-panel-button.selected`).each(function(){var t=$(this).data("value-2");for(let e=0;e<i.interaction.length;e++){var n=i.interaction[e];n.key==t&&o.push({property:n.logProperty,value:n.logValue})}}),$(`.engagement-panel-interaction[data-key="${i.key}"] .engagement-panel-text-input,
      .engagement-panel-interaction[data-key="${i.key}"] .engagement-panel-textarea`).each(function(){var t=$(this).data("key");for(let e=0;e<i.interaction.length;e++){var n=i.interaction[e];n.key==t&&o.push({property:n.logProperty,value:$(this).val().trim()})}}),o}getNextInQueue=i;async goToStep({interactionData:e,targetStepKey:t,selection:n,navigation:i}){var o=e.item.steps.filter(e=>e.id==t)[0];if(!o)return console.log("Target step not found");await this.updateItem({itemId:e.item.id,targetStep:o.key,targetStepQueuePriority:o.queuePriority,direction:"forward",logProperty:e.interaction.logProperty,logValue:e.interaction.logValue,logItems:n,systemAction:e.interaction.systemAction,runItemUpdate:e.interaction.runItemUpdate}),i.redirectPage?window.location.href=i.redirectPage:(e.item.history?e.item.history.push(o.key):e.item.history=[o.key],e.item.stage=o.key,this.renderUI({data:this.activeItems,checkpointResetFromCache:!0,focusItem:e.item.id}))}async redirect({navigation:e,interactionData:t,selection:n}){(t.interaction.logProperty||t.interaction.systemAction)&&await this.updateItem({logProperty:t.interaction.logProperty,logValue:t.interaction.logValue,logItems:n,systemAction:t.interaction.systemAction,runItemUpdate:t.interaction.runItemUpdate}),e.redirectPage&&(window.location.href=e.redirectPage)}back({interactionData:t}){var e=t.item.history.filter(e=>e!=t.item.stage);if(e.length){const i=e[e.length-1];var n=t.item.steps.filter(e=>e.key==i)[0];if(!n)return console.log("Previous step not found");this.updateItem({itemId:t.item.id,targetStep:n.key,targetStepQueuePriority:n.queuePriority,direction:"back"}),t.item.history=e,t.item.stage=n.key,this.renderUI({data:this.activeItems,checkpointResetFromCache:!0})}}async complete({interactionData:t,selection:e,navigation:n}){await this.updateItem({itemId:t.item.id,status:"complete",logProperty:t.interaction.logProperty,logValue:t.interaction.logValue,logItems:e,systemAction:t.interaction.systemAction}),n.redirectPage&&(window.location.href=n.redirectPage),this.activeItems=this.activeItems.filter(e=>e.id!==t.item.id),this.renderUI({data:this.activeItems,checkpointResetFromCache:!0})}getStepInteraction({key:t,event:n}){for(let e=0;e<this.activeItems.length;e++){const r=this.activeItems[e];var i=r.steps.filter(e=>e.key==r.stage)[0];if(!i)return;if(t){var o=i.interaction.filter(e=>e.key==t)[0];if(o)return{item:r,itemId:i.id,interaction:o}}if(n){o=i.interaction.filter(e=>e.event==n)[0];if(o)return{item:r,itemId:i.id,interaction:o}}}}async updateItem({itemId:e,targetStep:t,targetStepQueuePriority:n,direction:i,status:o,logProperty:r,logValue:s,logItems:a=[],systemAction:l,runItemUpdate:c}){e=await stepCore.server.send({sendData:{itemId:e,targetStep:t,targetStepQueuePriority:n,direction:i,status:o,page:this.page,logProperty:r,logValue:s,logItems:a,entryKey:this.entryKey,systemAction:l,runItemUpdate:c},url:"engagement/updateItem"});if("success"==e.status)return this.activeItems=e.data.items,this.userData=e.data.userData,l&&this.runSystemActionsOnPage({systemAction:l}),e.data;"error"==e.status&&console.log("error")}runSystemActionsOnPage({systemAction:e}){try{"enableListFolders"==e&&(listFoldersEnabled=!0)}catch(e){}}faqToggle({key:e}){$(`.engagement-faq[data-value-1="${e}"]`).toggleClass("open")}moreTextToggle({key:e}){$(`.engagement-read-more-text[data-key="${e}"]`).toggleClass("open")}scrollIntoViewWithOffset({selector:e,offset:t}){window.scrollTo({behavior:"smooth",top:e.getBoundingClientRect().top-document.body.getBoundingClientRect().top-t})}showTooltip({title:e,text:t,style:n,target:i,position:o}){this.resetModal({key:"tooltip"});e=`
      <div class="engagement-panel-title">
         ${e}
         <button class="engagement-panel-minimize engagement-action" data-action="minimize" data-value-1="tooltip"></button>
      </div>
      <div class="engagement-tooltip-body">${t.replace(/\n/g,"<BR>")}</div>
      <div class="engagement-tooltip-close-container">
         <button class="engagement-tooltip-close icon-ok">Close</button>
      </div>
      `;this.displayModal({itemMarkup:e,anchor:i,position:o,style:n,key:"tooltip"})}hide({key:e}){this.hiddenSteps.includes(e)||this.hiddenSteps.push(e);var t=this.getCheckpointKey({key:e});t&&!this.hiddenSteps.includes(t)&&this.hiddenSteps.push(t),this.resetModal({key:e}),$(`.engagement-panel-item[data-key="${e}"]`).addClass("hide")}getCheckpointKey({key:e}){var t=this.getStepInteraction({key:e});if(t)for(var n=t.item.history.length-1;0<=n;n--){const o=t.item.history[n];var i=item.steps.filter(e=>e.key==o)[0];if(i&&i.resetCheckpoint)return o}}showItem({step:e}){var t=this.renderStep({step:e,panelItem:null});"modal"==e.displayType&&this.displayModal({itemMarkup:t,anchor:e.elementAnchor,key:e.key})}delay(n){return new Promise(async function(e,t){setTimeout(()=>{e()},n)})}renderProgressMetre(){document.querySelectorAll("svg[data-value] .progress-circle-meter").forEach(e=>{var t=e.getTotalLength(),n=parseInt(e.parentNode.getAttribute("data-value")),t=t*((100-n)/100);e.getBoundingClientRect(),e.style.strokeDashoffset=Math.max(0,t),e.nextElementSibling.textContent=n+"%"})}}},{"../../../models/engagement/process/flow/getNextInQueue":3,"../../../models/engagement/process/triggerTests/testConditions":4}],18:[function(e,t,n){"use strict";function i(e){const n=e.target;if(!n.getAttribute("data-bypass-csrf")){e.preventDefault();e=n.getAttribute("data-validation");if(e)if(!formValidationFunctions[e]())return;fetch("/csrf/getToken").then(e=>e.text()).then(e=>{var t=n.querySelector('input[name="_csrf"]'),t=(t&&t.remove(),document.createElement("input"));t.type="hidden",t.name="_csrf",t.value=e,n.appendChild(t),n.submit()})}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("form").forEach(e=>{e.addEventListener("submit",i)})}),t.exports={add:function({node:e}){e.addEventListener("submit",i)}}},{}],19:[function(e,t,n){!function(r){!function(){"use strict";document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(e){var t,n;e.target.classList.contains("gc-ref")&&(t=e.target.dataset.key,n="undefined"!=typeof languageId?languageId:null,async function({node:e,nodeId:t,languageId:n}){class i extends uiComponent{constructor({node:e,nodeId:t,languageId:n,wording:i,content:o,listenWording:r}){super({node:e,insert:"tooltip",class:"glossary-dialog",clickOutAction:"remove"}),this.nodeId=t,this.languageId=n,this.render({wording:i,content:o,listenWording:r,nodeId:t,languageId:n}),this.initializeTooltip(),this.registerListeners({className:"glossary-action",listeners:[{function:this.listen,events:["click","enter"]}]})}render({wording:e,content:t,listenWording:n,languageId:i}){let o="";e&&(o+=`
            <div class="glossary-heading">
               ${this.removeGlossaryItems({text:e})}
               ${2112!=i?`
               <button class="glossary-listen glossary-action pill" data-action="listen">${n}</button>`:""}
            </div>`),o+=this.removeRecursiveReferences({text:t}),this.node.innerHTML=o}removeRecursiveReferences({text:e}){const n=this.nodeId;return e=e.replace(/<a class="gc-ref .?" data-key="\d*"><\/a>/g,function(e){var t=e.match(/data-key="(\d*)"/)[1];return n==t?"":e})}removeGlossaryItems({text:e}){return e&&e.replace(/<a class="gc-ref .?" data-key="\d*"><\/a>/g,"")}async listen({}){if(this.audioElement)return this.audioElement.play();var e=await stepCore.server.send({sendData:{id:this.nodeId,languageId:n},url:"cms/glossaryListen"}),e=r.from(e.data,"base64"),e=new Blob([e],{type:"audio/mpeg"});this.audioElement=new Audio(URL.createObjectURL(e)),this.audioElement.play()}}var o=await stepCore.server.send({sendData:{nodeId:t,languageId:n},url:"cms/glossaryLookup"});"success"==o.status&&o.data&&new i({node:e,nodeId:t,wording:o.data.wording,content:o.data.text,listenWording:o.listenWording})}({node:e.target,nodeId:t,languageId:n}))})})}.call(this)}.call(this,e("buffer").Buffer)},{buffer:8}],20:[function(e,t,n){"use strict";let i=null;t.exports={loadLanguageFont:async function({languageId:e}){var t;i&&(i.parentNode.removeChild(i),i=null),"success"==(e=await stepCore.server.send({sendData:{languageId:e},url:"pathways/getLanguageFont"})).status&&(e=e.font)&&((t=document.createElement("link")).rel="stylesheet",t.href=`https://fonts.googleapis.com/css2?family=${e.file}&display=swap`,document.head.appendChild(t),(i=document.createElement("style")).textContent=e.style,document.head.appendChild(i))},fontStylesheet:i}},{}],21:[function(e,t,n){"use strict";class g{constructor({sendData:e,url:t,successToastTitle:n,successToastMessage:i,errorToast:o,permissionToast:r,accessToast:s,server:a,refreshOnLogin:l,fileUpload:c,jwtToken:d,channel:u}){this.sendData=e,this.url=a.serverUrl+"/"+t,t.startsWith("http")&&(this.url=t),this.successToastTitle=n,this.successToastMessage=i,this.errorToast=o,this.permissionToast=r,this.accessToast=s,this.id=Math.floor(99999999*Math.random()),this.server=a,this.refreshOnLogin=l,this.fileUpload=c,this.jwtToken=d,this.attempts=0,this.resetConnection,this.fileUpload||(this.headers={"Content-Type":"application/json",Accept:"application/json"},d&&(this.headers.Authorization="Bearer "+d),this.server.bearerToken&&(this.headers.Authorization="Bearer "+this.server.bearerToken),this.headers.channel=u)}send({ignoreFailure:o}){const r=this;return new Promise(async function(n,e){try{let e;if(r.attempts++,r.fileUpload&&(e=await r.sendFormData()),!(e=r.fileUpload?e:await r.fetch()).ok){if(o)return n({status:"error"});if("network"==e.status)for(;"network"==e.status;){if(r.showConnectionError({}),await r.connectionReset(),r.sendData._csrf=await r.server.getCsrf({ignoreFailure:!0}),!r.sendData._csrf)return n({status:"error",reason:"csrf",message:"fail"}),r.server.clearRequest({id:r.id});e=await r.fetch()}if(r.jwtToken&&401==e.status){if(1<r.attempts)throw new Error(401);console.log("JWT rejected: retry");var i=await appApi.send({api:"refreshJwtToken"});"success"==i.status&&(r.jwtToken=i.jwtToken,r.server.useAppJwt({token:i.jwtToken}),r.headers.Authorization="Bearer "+i.jwtToken,e=await r.fetchTimeout())}if(401==e.status)throw console.log("401 error: session"),new Error(401);if(403==e.status)throw console.log("403 error: authorization"),new Error(403);if(406==e.status)throw console.log("406 error: CSRF token"),new Error(406);if(404==e.status)throw console.log("404 error: "+r.url),new Error(404);if("network"==e.status)throw console.log("Network error: probably no connection"),new Error("network");if(!e.ok)throw new Error("other")}let t;try{t=r.fileUpload?e:await e.json()}catch(e){throw new Error("application")}if("success"!=t.status)throw new Error(t.message||"application");"success"==t.status&&(n(t),r.server.clearRequest({id:r.id}))}catch(e){let t="unknown";if("session"==(t="session"==e.message||401==e.message?"session":403==e.message?"authorization":406==e.message?"csrf":404==e.message?404:"application"!=e.message&&"The user aborted a request."==e.message?"timeout":"application"))return n(await r.handleExpiredSession({ignoreFailure:o})),r.server.clearRequest({id:r.id});n({status:"error",reason:t,message:e.message})}})}sendFormData(){const l=this;return new Promise(async function(t,n){var e=new FormData;for(const r in l.sendData){var i=l.sendData[r];if(Array.isArray(i)&&i[0]instanceof File)for(const s of i)e.append(r,s);else e.append(r,i)}for(const a of e.entries());let o=l.url;l.sendData.image&&!l.sendData.files&&(o+="?type=image"),l.sendData.files&&!l.sendData.image&&(o+="?type=file"),l.sendData.image&&l.sendData.files&&(o+="?type=mixed",e.append("files",l.sendData.image),e.delete("image")),fetch(o,{method:"POST",body:e}).then(e=>e.json()).then(e=>{e.ok=!0,t(e)}).catch(e=>{n(e)})})}async fetch(){var e={method:"POST",headers:this.headers,body:JSON.stringify(this.sendData),credentials:this.server.bearerToken?"omit":"same-origin"};const t=new AbortController;var n=e["signal"];const i=setTimeout(()=>t.abort(),25e3);n?(n.addEventListener("abort",()=>t.abort()),e.signal=(new AbortSignal).follow(t.signal).follow(n),e.signal.addEventListener("abort",()=>clearTimeout(i))):e.signal=t.signal;try{var o=await fetch(this.url,e);return(clearTimeout(i),o.ok)?o:{status:o.status,message:"HTTP error response."}}catch(e){return clearTimeout(i),"AbortError"===e.name?{status:"network",message:"Request was aborted due to timeout."}:{status:"network",message:"Network error, possibly due to no internet connectivity."}}}sendErrorLog({error:e}){fetch(this.server.serverUrl+"/errors",{method:"POST",headers:this.headers,body:JSON.stringify({url:this.url,data:this.sendData,error:e})})}async handleExpiredSession({ignoreFailure:e}){var t=document.querySelector("#ajax-request-id");if(t)return t.value=this.id,$("#log-in-message .error-notice").html("You have been logged out due to inactivity. Please log in again"),openModal("login"),await this.getLoggedInSession,this.sendData._csrf=await request.server.getCsrf({}),await this.send({ignoreFailure:e})}getLoggedInSession=new Promise((t,e)=>{Object.defineProperty(this,"_sessionReceived",{set:e=>{e&&t()}})});sessionReceived(){this._sessionReceived=!0}showConnectionError({type:e="request"}){console.log(e),new stepCore.components.dialogComponent({parent:this,insertClass:"modal-light-blue",text:` 
         <div class="big-icon-container"><div class="big-icon icon-wifi"></div></div> 
         <div class="notice-bar error">You are not connected to the internet</div> 
         <div class="instruction">Please check your connection and try again.</div>`,buttons:[{key:"retryConnection",label:"Try again",icon:"reverse",class:"full-width"}],externalListeners:[{type:"dialogSelection",action:"request"==e?"retryConnection":"retryCsrf"}]})}childEventHandler({action:e}){"retryConnection"==e&&(this.resetConnection(),this.resetConnection=null)}connectionReset(){const n=this;return new Promise((e,t)=>{n.resetConnection=e})}}var i=new class{constructor({serverUrl:e}){this.activeRequests={},this.serverUrl=e;const n=this;this.authenticateViaAppJwt=!1,this.channel="web",window.addEventListener("load",e=>{var t=document.getElementById("login-submit"),t=(t&&t.addEventListener("click",function(){n.submitLogin()}),document.getElementById("log-in-password"));t&&t.addEventListener("keydown",function(e){13===e.keyCode&&(e.preventDefault(),n.submitLogin())})})}async send({sendData:e={},url:t,encoded:n,successToastTitle:i,successToastMessage:o,errorToast:r,permissionToast:s,accessToast:a,refreshOnLogin:l,fileUpload:c,ignoreFailure:d}){let u;this.authenticateViaAppJwt&&(u=this.authenticateViaAppJwt);t=new g({sendData:e,url:t,successToastTitle:i,successToastMessage:o,errorToast:r,permissionToast:s,accessToast:a,server:this,refreshOnLogin:l,fileUpload:c,jwtToken:u,channel:this.channel,ignoreFailure:d});this.addRequest({request:t});try{e._csrf=await this.getCsrf({ignoreFailure:d});var h=await t.send({ignoreFailure:d});if("error"==h.status?this.handleErrorToast({error:h,errorToast:r}):this.handleSuccessToast({successToastTitle:i,successToastMessage:o}),n&&"error"!=h.status){var f=this.decodeObscured({data:h.responsePacket,shift:32});for(const p in f)h[p]=f[p]}return h}catch(e){return this.handleErrorToast({error:e,errorToast:r,permissionToast:s,accessToast:a}),{status:"error"}}}async getCsrf({ignoreFailure:e}){let t={ok:!1};for(;!t.ok;){try{t=await fetch(this.serverUrl+"/csrf/getToken",{method:"GET"})}catch(e){console.log(e)}if(!t.ok){if(e)return;this.showConnectionError({type:"csrf"}),await this.connectionReset()}}return t.text()}decodeObscured({data:e,shift:n}){return e=e.split("").map(e=>{var t=e.charCodeAt(0);return 65<=t?String.fromCharCode(t-n):e}).join(""),JSON.parse(e)}addRequest({request:e}){this.activeRequests[e.id]=e}clearRequest({id:e}){delete this.activeRequests[e]}getRequest({id:e}){return this.activeRequests[e]}setBearerToken({token:e}){this.bearerToken=e}useAppJwt({token:e}){this.authenticateViaAppJwt=e,this.channel="app"}async submitLogin(){document.getElementById("login-submit").classList.add("loading");var e=$("#log-in-username").val().trim(),t=$("#log-in-password").val().trim();let n=$("#ajax-request-id").val(),i=(n=n&&n.trim(),new g({sendData:{email:e,password:t},url:"ajaxLogin",server:this}));this.addRequest({request:i});e=await i.send({});if(document.getElementById("login-submit").classList.remove("loading"),"success"==e.outcome){if(closeModal("login"),"undefined"!=typeof publicLogin&&publicLogin)if(e.redirect||window.location.href.includes("#login")||!n)return t=e.redirect||window.location.href.replace("#login",""),window.location.href=t;const i=this.getRequest({id:n});return i.refreshOnLogin?window.location.href=window.location.href:i.sessionReceived()}"failed"==e.outcome&&("credentials"==e.reason&&($("#log-in-message .error-notice").html(""+e.message),$(".log-in-error").removeClass("hide").html(""+e.message)),"lockout"==e.reason)&&($("#log-in-message .error-notice").html("Your account has been locked for security reasons. We have sent you an email containing a link to unlock your account."),$(".log-in-error").removeClass("hide").html("Your account has been locked for security reasons. We have sent you an email containing a link to unlock your account."))}handleSuccessToast({successToastTitle:e,successToastMessage:t}){(e||t)&&(!0===e&&(e="Updated"),stepCore.toast({type:"success",duration:4e3,heading:e,message:t||""}))}handleErrorToast({error:n,errorToast:i}){if("session"!=n.reason){n.reason;let e,t;i?t=i:(t="An error has occurred",e="Our tech team have been notified"),"authorization"==n.reason&&(t="You don't have access for this",e="Contact your administrator"),stepCore.toast({type:"error",duration:7e3,heading:t,message:e})}}loadJSFile({path:o}){const r=this;return new Promise(async function(t,e){let n=!1;var i=document.createElement("script");i.src=""+window.location.origin+o,i.onreadystatechange=function(){"complete"!==i.readyState&&"complete"!==i.readyState||(i.onreadystatechange=null,n=!0,t({status:"success"}))},i.onload=function(){n=!0,t({status:"success"})},i.addEventListener("error",e=>{n=!0,console.log("Load JS file (probably 404)1: "+o),r.logJsLoadFailure({path:o,error:"404"}),t({status:"error"})}),document.documentElement.firstChild.appendChild(i),setTimeout(()=>{n||(console.log("Load JS file: No response "+o),r.logJsLoadFailure({path:o,error:"timeout"}),t({status:"error"}))},2e4)})}logJsLoadFailure({path:e,error:t}){stepCore.toast({type:"error",duration:5e3,heading:"Problem loading page"}),fetch(serverUrl+"/errors",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({url:e,data:{error:"JS resource not loaded: "+t}})})}loadCssFile({path:o}){return new Promise(async function(e,t){var n=document.createElement("link"),i=(n.type="text/css",n.rel="stylesheet",n.onload=()=>e({status:"success"}),n.onerror=()=>t({status:"error"}),n.href=""+window.location.origin+o,document.querySelector("script"));i.parentNode.insertBefore(n,i)})}updateServerUrl({serverUrl:e}){this.serverUrl=e}showConnectionError({type:e="request"}){console.log(e),new stepCore.components.dialogComponent({parent:this,insertClass:"modal-light-blue",text:` 
         <div class="big-icon-container"><div class="big-icon icon-wifi"></div></div> 
         <div class="notice-bar error">You are not connected to the internet</div> 
         <div class="instruction">Please check your connection and try again.</div>`,buttons:[{key:"retryConnection",label:"Try again",icon:"reverse",class:"full-width"}],externalListeners:[{type:"dialogSelection",action:"request"==e?"retryConnection":"retryCsrf"}]})}childEventHandler({action:e}){"retryCsrf"==e&&(this.resetConnection(),this.resetConnection=null)}connectionReset(){const n=this;return new Promise((e,t)=>{n.resetConnection=e})}}({serverUrl:"undefined"!=typeof serverUrl?serverUrl:window.location.protocol+"//"+window.location.host});t.exports=i},{}]},{},[1]);
//# sourceMappingURL=step-core-dd02a4f87a.js.map
